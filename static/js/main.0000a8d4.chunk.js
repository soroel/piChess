(this["webpackJsonpapp-platform-demo-frontend"]=this["webpackJsonpapp-platform-demo-frontend"]||[]).push([[0],[,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),s=n(3),a=n.n(s),r=(n(8),n(9),n(0));var o=e=>{let{onSelectMode:t}=e;return Object(r.jsxs)("div",{className:"game-mode-selector",children:[Object(r.jsx)("h1",{children:"Choose Game Mode"}),Object(r.jsxs)("div",{className:"mode-buttons",children:[Object(r.jsxs)("button",{className:"mode-button computer",onClick:()=>t("computer"),children:[Object(r.jsx)("h2",{children:"Play vs Computer"}),Object(r.jsx)("p",{children:"Challenge our AI opponent"}),Object(r.jsx)("p",{className:"highlight",children:"Free to play!"})]}),Object(r.jsxs)("button",{className:"mode-button pi",onClick:()=>t("pi"),children:[Object(r.jsx)("h2",{children:"Play for Pi"}),Object(r.jsx)("p",{children:"Compete for Pi cryptocurrency"}),Object(r.jsx)("p",{className:"highlight",children:"0.01 Pi to enter"}),Object(r.jsx)("p",{className:"prize",children:"Winner gets 0.018 Pi!"})]})]})]})};var l=(()=>{const e=window.location.hostname,t="localhost"===e||"127.0.0.1"===e,n="test.your-domain.com"===e;return{isProd:"your-production-domain.com"===e,isDev:t,isTest:n,piNetwork:{version:"2.0",sandbox:t||n,apiKey:void 0}}})();const d=.01;class h{constructor(){this.accessToken=null,this.username=null,this.initialized=!1,this.currentPayment=null,this.handleIncompletePayment=async e=>{try{console.log("Found incomplete payment:",e),null!==e&&void 0!==e&&e.identifier&&(this.currentPayment=e.identifier)}catch(t){console.error("Error handling incomplete payment:",t)}},this.initializePiNetwork()}initializePiNetwork(){try{"Pi"in window&&(window.Pi.init({version:"2.0",sandbox:l.piNetwork.sandbox}),this.initialized=!0)}catch(e){console.error("Failed to initialize Pi Network:",e)}}static getInstance(){return h.instance||(h.instance=new h),h.instance}async authenticate(){try{if(this.initialized||this.initializePiNetwork(),!("Pi"in window))throw new Error("Pi Network SDK not found");const e=await window.Pi.authenticate(["username","payments"],{onIncompletePaymentFound:this.handleIncompletePayment});return this.accessToken=e.accessToken,this.username=e.user.username,{username:e.user.username,accessToken:e.accessToken}}catch(e){throw console.error("Pi Network authentication failed:",e),e}}isAuthenticated(){return this.initialized&&!!this.accessToken&&!!this.username}getUsername(){return this.username}getAccessToken(){return this.accessToken}async startPayment(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!this.initialized||!("Pi"in window))throw new Error("Pi Network SDK not found or not initialized");if(this.currentPayment)throw new Error("There is an incomplete payment that needs to be handled first");try{const s={amount:e,memo:"Chess game entry fee",metadata:{type:"chess_game_entry",timestamp:Date.now(),gameId:Math.random().toString(36).substring(7)}};return await window.Pi.createPayment(s,{onReadyForServerApproval:e=>{console.log("Payment ready for server approval:",e),this.currentPayment=e,null===t||void 0===t||t(e)},onReadyForServerCompletion:e=>{console.log("Payment ready for server completion:",e),null===n||void 0===n||n(e),this.currentPayment=null},onCancel:e=>{console.log("Payment cancelled:",e),this.currentPayment=null,null===c||void 0===c||c(e)},onError:(e,t)=>{console.error("Payment error:",e),this.currentPayment=null,null===i||void 0===i||i(e,t)}})}catch(s){throw console.error("Payment creation failed:",s),s}}}h.instance=void 0;const m=h.getInstance();n(11);var j=e=>{let{onGameStart:t,onCancel:n}=e;const[i,s]=Object(c.useState)("initial"),[a,o]=Object(c.useState)(null);Object(c.useEffect)((()=>{"initial"===i&&l()}),[i]);const l=async()=>{s("authenticating");try{await m.authenticate(),s("paying"),o(null),h()}catch(a){o("Authentication failed. Please try again."),s("error")}},h=async()=>{try{await m.startPayment(d,(e=>{console.log("Payment approved by server:",e)}),(e=>{console.log("Payment completed by server:",e),s("ready"),t()}),(e=>{console.log("Payment cancelled:",e),o("Payment was cancelled. Please try again."),s("error")}),(e=>{console.error("Payment error:",e),o("Payment failed. Please try again."),s("error")}))}catch(a){console.error("Payment error:",a),o("Payment failed. Please try again."),s("error")}};return Object(r.jsxs)("div",{className:"pi-game-mode",children:[Object(r.jsx)("h2",{children:"Play for Pi"}),a&&Object(r.jsxs)("div",{className:"error-message",children:[Object(r.jsx)("p",{children:a}),Object(r.jsx)("button",{onClick:()=>{o(null),s("initial")},children:"Try Again"}),Object(r.jsx)("button",{className:"cancel-button",onClick:n,children:"Cancel"})]}),"initial"===i&&Object(r.jsxs)("div",{className:"status-message",children:[Object(r.jsx)("p",{children:"Connecting to Pi Network..."}),Object(r.jsx)("div",{className:"loader"})]}),"authenticating"===i&&Object(r.jsxs)("div",{className:"status-message",children:[Object(r.jsx)("p",{children:"Authenticating with Pi Network..."}),Object(r.jsx)("div",{className:"loader"})]}),"paying"===i&&Object(r.jsxs)("div",{className:"status-message",children:[Object(r.jsx)("p",{children:"Processing payment..."}),Object(r.jsx)("div",{className:"loader"}),Object(r.jsxs)("div",{className:"payment-info",children:[Object(r.jsxs)("p",{children:["Entry Fee: ",Object(r.jsxs)("span",{className:"highlight",children:[d," Pi"]})]}),Object(r.jsxs)("p",{children:["Prize Pool: ",Object(r.jsxs)("span",{className:"highlight",children:[.018," Pi"]})]})]})]}),"ready"===i&&Object(r.jsxs)("div",{className:"status-message",children:[Object(r.jsx)("p",{children:"Payment confirmed! Starting game..."}),Object(r.jsx)("div",{className:"success-animation"})]})]})};n(12);function u(e){return{"white-P":"\u2659","white-R":"\u2656","white-N":"\u2658","white-B":"\u2657","white-Q":"\u2655","white-K":"\u2654","black-P":"\u265f","black-R":"\u265c","black-N":"\u265e","black-B":"\u265d","black-Q":"\u265b","black-K":"\u265a"}[e]||""}var b=e=>{let{board:t,selectedSquare:n,onSquareClick:c}=e;return Object(r.jsx)("div",{className:"chess-board",children:t.map(((e,i)=>Object(r.jsx)("div",{className:"board-row",children:e.map(((e,s)=>((e,i)=>{const s=t[e][i],a=(null===n||void 0===n?void 0:n[0])===e&&(null===n||void 0===n?void 0:n[1])===i,o=(e+i)%2===0;return Object(r.jsx)("div",{className:"\n          square\n          ".concat(o?"light":"dark","\n          ").concat(a?"selected":"","\n        "),onClick:()=>c(e,i),children:s&&Object(r.jsx)("div",{className:"piece ".concat(s.toLowerCase()),children:u(s)})},"".concat(e,"-").concat(i))})(i,s)))},i)))})};n(13);function p(e){return{"white-P":"\u2659","white-R":"\u2656","white-N":"\u2658","white-B":"\u2657","white-Q":"\u2655","white-K":"\u2654","black-P":"\u265f","black-R":"\u265c","black-N":"\u265e","black-B":"\u265d","black-Q":"\u265b","black-K":"\u265a"}[e]||""}var O=e=>{let{pieces:t}=e;const n=e=>({P:1,N:3,B:3,R:5,Q:9,K:0}[e.split("-")[1]]||0),c=t.reduce(((e,t)=>e+n(t)),0);return Object(r.jsxs)("div",{className:"captured-pieces",children:[Object(r.jsx)("div",{className:"pieces-container",children:t.sort(((e,t)=>n(t)-n(e))).map(((e,t)=>Object(r.jsx)("div",{className:"captured-piece ".concat(e.toLowerCase()),children:p(e)},t)))}),t.length>0&&Object(r.jsxs)("div",{className:"material-advantage",children:["Material: ",c]})]})};n(14);var y=e=>{let{moves:t}=e;const n=[];for(let c=0;c<t.length;c+=2)n.push({number:Math.floor(c/2)+1,white:t[c],black:t[c+1]||""});return Object(r.jsxs)("div",{className:"move-history",children:[Object(r.jsx)("h3",{children:"Move History"}),Object(r.jsx)("div",{className:"moves-container",children:Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"#"}),Object(r.jsx)("th",{children:"White"}),Object(r.jsx)("th",{children:"Black"})]})}),Object(r.jsx)("tbody",{children:n.map((e=>{let{number:t,white:n,black:c}=e;return Object(r.jsxs)("tr",{children:[Object(r.jsxs)("td",{children:[t,"."]}),Object(r.jsx)("td",{children:n}),Object(r.jsx)("td",{children:c})]},t)}))})]})})]})};const x=new class{constructor(){this.difficulty="medium"}setDifficulty(e){this.difficulty=e}async calculateMove(e,t){return new Promise((e=>{setTimeout((()=>{e({from:{row:1,col:0},to:{row:2,col:0},piece:"P"})}),1e3)}))}evaluatePosition(e){return 0}};n(15);var v=e=>{let{mode:t,onGameEnd:n,onExit:i}=e;const[s,a]=Object(c.useState)(function(){const e=Array(8).fill(null).map((()=>Array(8).fill(null)));for(let n=0;n<8;n++)e[1][n]="black-P",e[6][n]="white-P";const t=["R","N","B","Q","K","B","N","R"];for(let n=0;n<8;n++)e[0][n]="black-".concat(t[n]),e[7][n]="white-".concat(t[n]);return e}()),[o,l]=Object(c.useState)(null),[d,h]=Object(c.useState)("white"),[m,j]=Object(c.useState)([]),[u,p]=Object(c.useState)([]),[v,w]=Object(c.useState)(!1);Object(c.useEffect)((()=>{"computer"===t&&"black"===d&&g()}),[d,t]);const g=async()=>{const e=await x.calculateMove(s.map((e=>e.map((e=>e||"")))),null);P(e.from.row,e.from.col,e.to.row,e.to.col)},P=(e,t,n,c)=>{const i=s.map((e=>[...e])),r=i[e][t],o=i[n][c];i[n][c]=r,i[e][t]=null,o&&j([...m,o]);const l=function(e,t,n,c,i,s){const a="abcdefgh",r=i.split("-")[1],o="".concat(a[t]).concat(8-e),l="".concat(a[c]).concat(8-n);return"".concat(r).concat(o).concat(s?"x":"-").concat(l)}(e,t,n,c,r,!!o);p([...u,l]),a(i),h("white"===d?"black":"white")};return Object(r.jsxs)("div",{className:"chess-game",children:[Object(r.jsxs)("div",{className:"game-header",children:[Object(r.jsx)("h2",{children:"Chess Game"}),Object(r.jsx)("button",{className:"exit-button",onClick:i,children:"Exit Game"})]}),Object(r.jsxs)("div",{className:"game-content",children:[Object(r.jsx)("div",{className:"left-panel",children:Object(r.jsx)(O,{pieces:m.filter((e=>e.startsWith("white")))})}),Object(r.jsxs)("div",{className:"board-container",children:[Object(r.jsxs)("div",{className:"current-player",children:["Current Player: ",d]}),Object(r.jsx)(b,{board:s,selectedSquare:o,onSquareClick:(e,n)=>{if(v||"computer"===t&&"black"===d)return;const c=s[e][n];if(!o)return void(c&&c.startsWith(d)&&l([e,n]));if(o[0]===e&&o[1]===n)return void l(null);const[i,a]=o;var r,h;h=n,(r=e)>=0&&r<8&&h>=0&&h<8?(P(i,a,e,n),l(null)):c&&c.startsWith(d)&&l([e,n])}}),v&&Object(r.jsxs)("div",{className:"game-over",children:[Object(r.jsx)("h3",{children:"Checkmate!"}),Object(r.jsxs)("p",{children:[d," wins!"]})]})]}),Object(r.jsxs)("div",{className:"right-panel",children:[Object(r.jsx)(O,{pieces:m.filter((e=>e.startsWith("black")))}),Object(r.jsx)(y,{moves:u})]})]})]})};n(16);var w=()=>{const[e,t]=Object(c.useState)("selection"),[n,i]=Object(c.useState)("selecting"),s=()=>{t("selection"),i("selecting")};return Object(r.jsxs)("div",{className:"app",children:["selecting"===n&&Object(r.jsx)(o,{onSelectMode:e=>{t(e),i("computer"===e?"playing":"paying")}}),"paying"===n&&"pi"===e&&Object(r.jsx)(j,{onGameStart:()=>{i("playing")},onCancel:s}),"playing"===n&&"selection"!==e&&Object(r.jsx)(v,{mode:e,onGameEnd:e=>{console.log("Game ended. Winner: ".concat(e))},onExit:s})]})};window.Pi&&(window.Pi.init={sandbox:!0}),a.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(w,{})}),document.getElementById("root"))}],[[17,1,2]]]);