(this["webpackJsonpapp-platform-demo-frontend"]=this["webpackJsonpapp-platform-demo-frontend"]||[]).push([[0],[,,,,,,,,,,,function(e,o,t){},function(e,o,t){},function(e,o,t){},,function(e,o,t){},function(e,o,t){},function(e,o,t){},function(e,o,t){},function(e,o,t){},function(e,o,t){},function(e,o,t){},function(e,o,t){"use strict";t.r(o);var c=t(1),n=t.n(c),r=t(4),i=t.n(r),l=(t(10),t(11),t(2)),s=(t(12),t(13),t(0));const a={queen:{white:"\u2655",black:"\u265b"},rook:{white:"\u2656",black:"\u265c"},bishop:{white:"\u2657",black:"\u265d"},knight:{white:"\u2658",black:"\u265e"}},u={queen:"Moves any number of squares diagonally, horizontally, or vertically",rook:"Moves any number of squares horizontally or vertically",bishop:"Moves any number of squares diagonally",knight:"Moves in an L-shape: 2 squares in one direction and 1 square perpendicular"};var p=e=>{let{color:o,position:t,onSelect:n}=e;return Object(c.useEffect)((()=>{const e=e=>{"Escape"===e.key&&n("queen")};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[n]),Object(s.jsx)("div",{className:"promotion-overlay",children:Object(s.jsxs)("div",{className:"promotion-dialog",style:{position:"absolute",left:"".concat(t.x,"px"),top:"".concat(t.y,"px"),transform:"translate(-50%, -50%)",animation:"slideIn 0.3s ease-out"},role:"dialog","aria-modal":"true","aria-label":"Pawn promotion selection",children:[Object(s.jsx)("div",{className:"promotion-header",children:"Choose a piece for promotion"}),Object(s.jsx)("div",{className:"promotion-options",children:["queen","rook","bishop","knight"].map((e=>Object(s.jsxs)("button",{className:"promotion-option",onClick:()=>n(e),title:u[e],"aria-label":"Promote to ".concat(e),children:[Object(s.jsx)("div",{className:"piece-symbol",children:a[e][o]}),Object(s.jsx)("div",{className:"piece-name",children:e.toUpperCase()})]},e)))}),Object(s.jsx)("div",{className:"promotion-footer",children:"Press ESC to cancel (default: Queen)"})]})})};t(15);var h=e=>{let{winner:o,onNewGame:t}=e;return Object(s.jsx)("div",{className:"checkmate-overlay",children:Object(s.jsx)("div",{className:"checkmate-popup",children:Object(s.jsxs)("div",{className:"checkmate-content",children:[Object(s.jsx)("h2",{children:"Checkmate!"}),Object(s.jsxs)("p",{children:[o.charAt(0).toUpperCase()+o.slice(1)," wins!"]}),Object(s.jsx)("button",{className:"new-game-button",onClick:t,children:"New Game"})]})})})};const w={king:{white:"\u2654",black:"\u265a"},queen:{white:"\u2655",black:"\u265b"},rook:{white:"\u2656",black:"\u265c"},bishop:{white:"\u2657",black:"\u265d"},knight:{white:"\u2658",black:"\u265e"},pawn:{white:"\u2659",black:"\u265f"}},b=["a","b","c","d","e","f","g","h"],d=["8","7","6","5","4","3","2","1"];var f=e=>{let{currentPlayer:o,gameStatus:t,onMove:n,onNewGame:r,boardHistory:i}=e;const a=Object(c.useCallback)((()=>{const e=[];for(let o=0;o<8;o++){const t=[];for(let e=0;e<8;e++)t.push({piece:S(o,e),color:(o+e)%2===0?"white":"black"});e.push(t)}return e}),[]),[u,f]=Object(c.useState)(a()),[m,j]=Object(c.useState)(null),[k,v]=Object(c.useState)([]),[O,g]=Object(c.useState)({lastMove:null,canEnPassant:null}),[y,x]=Object(c.useState)(null),[N,E]=Object(c.useState)(null),M=Object(c.useRef)(null);function S(e,o){if(e<=1){const t="black";if(1===e)return{type:"pawn",color:t};return{type:["rook","knight","bishop","queen","king","bishop","knight","rook"][o],color:t}}if(e>=6){const t="white";if(6===e)return{type:"pawn",color:t};return{type:["rook","knight","bishop","queen","king","bishop","knight","rook"][o],color:t}}return null}function C(e,o){return"".concat(b[o]).concat(8-e)}function P(e){const o=e.charAt(0).toLowerCase();return{row:8-parseInt(e.charAt(1)),col:b.indexOf(o)}}function q(e,o,t){var c;if("king"===(null===(c=O.lastMove)||void 0===c?void 0:c.piece.type)&&O.lastMove.piece.color===t)return!1;const n="white"===t?7:0;if(e.row!==n||4!==e.col)return!1;const r=u[e.row][e.col].piece,i=u[o.row][o.col].piece;if(!r||!i||"king"!==r.type||"rook"!==i.type)return!1;const s=o.col<e.col?-1:1;for(let l=e.col+s;l!==o.col;l+=s)if(u[n][l].piece)return!1;for(let a=e.col;a!==e.col+3*s;a+=s){const o=u.map((e=>e.map((e=>Object(l.a)({},e)))));if(o[n][a].piece=r,o[n][e.col].piece=null,B(t,o))return!1}return!0}function A(e,o,t){const c=[];switch(o.type){case"pawn":const n="white"===o.color?-1:1,r="white"===o.color?6:1;let i=e.row+n;if(i>=0&&i<8&&!t[i][e.col].piece&&(c.push({row:i,col:e.col}),e.row===r)){const o=e.row+2*n;t[o][e.col].piece||c.push({row:o,col:e.col})}[-1,1].forEach((n=>{const r=e.col+n;if(r>=0&&r<8&&i>=0&&i<8){const e=t[i][r].piece;e&&e.color!==o.color&&c.push({row:i,col:r})}}));break;case"knight":[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]].forEach((n=>{let[r,i]=n;const l=e.row+r,s=e.col+i;if(l>=0&&l<8&&s>=0&&s<8){const e=t[l][s].piece;e&&e.color===o.color||c.push({row:l,col:s})}}));break;case"bishop":[[-1,-1],[-1,1],[1,-1],[1,1]].forEach((n=>{let[r,i]=n,l=e.row+r,s=e.col+i;for(;l>=0&&l<8&&s>=0&&s<8;){const e=t[l][s].piece;if(e){e.color!==o.color&&c.push({row:l,col:s});break}c.push({row:l,col:s}),l+=r,s+=i}}));break;case"rook":[[-1,0],[1,0],[0,-1],[0,1]].forEach((n=>{let[r,i]=n,l=e.row+r,s=e.col+i;for(;l>=0&&l<8&&s>=0&&s<8;){const e=t[l][s].piece;if(e){e.color!==o.color&&c.push({row:l,col:s});break}c.push({row:l,col:s}),l+=r,s+=i}}));break;case"queen":[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].forEach((n=>{let[r,i]=n,l=e.row+r,s=e.col+i;for(;l>=0&&l<8&&s>=0&&s<8;){const e=t[l][s].piece;if(e){e.color!==o.color&&c.push({row:l,col:s});break}c.push({row:l,col:s}),l+=r,s+=i}}));break;case"king":[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].forEach((n=>{let[r,i]=n;const l=e.row+r,s=e.col+i;if(l>=0&&l<8&&s>=0&&s<8){const e=t[l][s].piece;e&&e.color===o.color||c.push({row:l,col:s})}}))}return c}function F(e,o){for(let t=0;t<8;t++)for(let c=0;c<8;c++){const n=o[t][c].piece;if("king"===(null===n||void 0===n?void 0:n.type)&&n.color===e)return{row:t,col:c}}return null}function L(e,o,t){const c="white"===o?1:-1,n=[{row:e.row+c,col:e.col-1},{row:e.row+c,col:e.col+1}];for(const a of n)if(a.row>=0&&a.row<8&&a.col>=0&&a.col<8){const e=t[a.row][a.col].piece;if("pawn"===(null===e||void 0===e?void 0:e.type)&&e.color===o)return!0}const r=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[a,u]of r){const c=e.row+a,n=e.col+u;if(c>=0&&c<8&&n>=0&&n<8){const e=t[c][n].piece;if("knight"===(null===e||void 0===e?void 0:e.type)&&e.color===o)return!0}}const i=[[-1,-1],[-1,1],[1,-1],[1,1]];for(const[a,u]of i){let c=e.row+a,n=e.col+u;for(;c>=0&&c<8&&n>=0&&n<8;){const e=t[c][n].piece;if(e){if(e.color===o&&("bishop"===e.type||"queen"===e.type))return!0;break}c+=a,n+=u}}const l=[[-1,0],[1,0],[0,-1],[0,1]];for(const[a,u]of l){let c=e.row+a,n=e.col+u;for(;c>=0&&c<8&&n>=0&&n<8;){const e=t[c][n].piece;if(e){if(e.color===o&&("rook"===e.type||"queen"===e.type))return!0;break}c+=a,n+=u}}const s=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(const[a,u]of s){const c=e.row+a,n=e.col+u;if(c>=0&&c<8&&n>=0&&n<8){const e=t[c][n].piece;if("king"===(null===e||void 0===e?void 0:e.type)&&e.color===o)return!0}}return!1}function B(e,o){const t=F(e,o);if(!t)return!1;return L(t,"white"===e?"black":"white",o)}function G(e,o){const t=function(e,o){const t=F(e,o);if(!t)return[];const c=[],n="white"===e?"black":"white",r="white"===n?1:-1,i=[{row:t.row+r,col:t.col-1},{row:t.row+r,col:t.col+1}];for(const a of i)if(a.row>=0&&a.row<8&&a.col>=0&&a.col<8){const e=o[a.row][a.col].piece;"pawn"===(null===e||void 0===e?void 0:e.type)&&e.color===n&&c.push({row:a.row,col:a.col})}const l=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[a,u]of l){const e=t.row+a,r=t.col+u;if(e>=0&&e<8&&r>=0&&r<8){const t=o[e][r].piece;"knight"===(null===t||void 0===t?void 0:t.type)&&t.color===n&&c.push({row:e,col:r})}}const s=[[-1,-1],[-1,1],[1,-1],[1,1],[-1,0],[1,0],[0,-1],[0,1]];for(const[a,u]of s){let e=t.row+a,r=t.col+u;for(;e>=0&&e<8&&r>=0&&r<8;){const t=o[e][r].piece;if(t){if(t.color===n){const o=Math.abs(a)===Math.abs(u);(!o||"bishop"!==t.type&&"queen"!==t.type)&&(o||"rook"!==t.type&&"queen"!==t.type)||c.push({row:e,col:r})}break}e+=a,r+=u}}return c}(e,o);if(0===t.length)return!0;if(t.length>1)return V(e,o);const c=F(e,o),n=t[0],r=o[n.row][n.col].piece.type;if("knight"===r||"pawn"===r)return U(e,n,o)||V(e,o);return function(e,o){const t=[],c=Math.sign(o.row-e.row),n=Math.sign(o.col-e.col);let r=e.row+c,i=e.col+n;for(;r!==o.row||i!==o.col;)t.push({row:r,col:i}),r+=c,i+=n;return t}(c,n).some((t=>I(t,e,o)))||U(e,n,o)||V(e,o)}function I(e,o,t){for(let c=0;c<8;c++)for(let n=0;n<8;n++){const r=t[c][n].piece;if(r&&r.color===o){if(A({row:c,col:n},r,t).some((o=>o.row===e.row&&o.col===e.col))){const r=t.map((e=>e.map((e=>Object(l.a)({},e)))));if(r[e.row][e.col].piece=r[c][n].piece,r[c][n].piece=null,!B(o,r))return!0}}}return!1}function U(e,o,t){return I(o,e,t)}function V(e,o){const t=F(e,o),c=o[t.row][t.col].piece;return A(t,c,o).some((n=>{const r=o.map((e=>e.map((e=>Object(l.a)({},e)))));return r[n.row][n.col].piece=c,r[t.row][t.col].piece=null,!L(n,"white"===e?"black":"white",r)}))}function R(e,o){return!!B(e,o)&&!G(e,o)}function z(e,c){if("checkmate"!==t&&!y)if(m){if(k.some((o=>o.row===e&&o.col===c))){const t=u.map((e=>e.map((e=>Object(l.a)({},e))))),r=t[m.row][m.col].piece,i=t[e][c].piece,s=!!i||"pawn"===r.type&&c!==m.col;if("king"===r.type&&2===Math.abs(c-m.col)){const o=c>m.col?7:0,n=c>m.col?c-1:c+1;t[e][n].piece=t[e][o].piece,t[e][o].piece=null}if("pawn"===r.type&&c!==m.col&&!i){t[m.row][c].piece=null}t[e][c].piece=r,t[m.row][m.col].piece=null,E({from:{row:m.row,col:m.col},to:{row:e,col:c}});const a={lastMove:{piece:r,from:Object(l.a)({},m),to:{row:e,col:c}},canEnPassant:null};if("pawn"===r.type&&2===Math.abs(e-m.row)&&(a.canEnPassant={row:e,col:c}),f(t),g(a),"pawn"===r.type){if("white"===r.color&&0===e||"black"===r.color&&7===e){if(function(e){const o=u[e.row][e.col].piece;if(!o||"pawn"!==o.type)return!1;if(("white"===o.color&&0===e.row||"black"===o.color&&7===e.row)&&M.current){const o=M.current.querySelector('[data-position="'.concat(e.row,"-").concat(e.col,'"]'));if(o){const t=o.getBoundingClientRect(),c=M.current.getBoundingClientRect(),n=t.left-c.left+t.width/2,r=t.top-c.top+t.height/2;return x({position:e,dialogPosition:{x:n,y:r}}),!0}}return!1}({row:e,col:c}))return}}const p="white"===o?"black":"white",h=B(p,t),b=h&&R(p,t),d={piece:w[r.type][r.color],from:C(m.row,m.col),to:C(e,c),capture:s,check:h,checkmate:b};n(d,t)}j(null),v([])}else{const t=u[e][c].piece;t&&t.color===o&&(j({row:e,col:c}),v(function(e,t){let c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=t[e.row][e.col].piece;if(!n||n.color!==o&&!c)return[];let r=A(e,n,t);if(!c&&("king"!==n.type||B(n.color,t)||(q(e,{row:e.row,col:7},n.color)&&r.push({row:e.row,col:e.col+2}),q(e,{row:e.row,col:0},n.color)&&r.push({row:e.row,col:e.col-2})),"pawn"===n.type&&O.canEnPassant)){const o="white"===n.color?3:4;e.row===o&&[-1,1].forEach((o=>{var t;e.col+o===(null===(t=O.canEnPassant)||void 0===t?void 0:t.col)&&r.push({row:e.row+("white"===n.color?-1:1),col:e.col+o})}))}c||(r=r.filter((o=>{const c=t.map((e=>e.map((e=>Object(l.a)({},e)))));return c[o.row][o.col].piece=c[e.row][e.col].piece,c[e.row][e.col].piece=null,!B(n.color,c)})));return r}({row:e,col:c},u)))}}return Object(c.useEffect)((()=>{if(i.length>0){const e=i[i.length-1];if(f(e.board),e.move){const o=P(e.move.from),t=P(e.move.to);E({from:o,to:t})}}else f(a()),E(null)}),[i,a]),Object(s.jsxs)("div",{className:"chess-board",ref:M,children:[u.map(((e,c)=>Object(s.jsx)("div",{className:"board-row",children:e.map(((e,n)=>{var r;const i=(null===N||void 0===N?void 0:N.from.row)===c&&(null===N||void 0===N?void 0:N.from.col)===n,l=(null===N||void 0===N?void 0:N.to.row)===c&&(null===N||void 0===N?void 0:N.to.col)===n,a="king"===(null===(r=e.piece)||void 0===r?void 0:r.type)&&e.piece.color===o&&"check"===t;return Object(s.jsx)("div",{className:"square ".concat(e.color," ").concat((null===m||void 0===m?void 0:m.row)===c&&(null===m||void 0===m?void 0:m.col)===n?"selected":""," ").concat(k.some((e=>e.row===c&&e.col===n))?"valid-move":""," ").concat(i||l?"last-move":""," ").concat(a?"check":""),"data-position":"".concat(c,"-").concat(n),"data-file":7===c?b[n]:"","data-rank":0===n?d[c]:"",onClick:()=>z(c,n),children:e.piece&&Object(s.jsx)("div",{className:"piece ".concat(l?"piece-moving":""),children:w[e.piece.type][e.piece.color]})},"".concat(c,"-").concat(n))}))},c))),y&&Object(s.jsx)(p,{color:u[y.position.row][y.position.col].piece.color,position:y.dialogPosition,onSelect:function(e){if(!y||!O.lastMove)return;const o=u.map((e=>e.map((e=>Object(l.a)({},e))))),t=o[y.position.row][y.position.col].piece;o[y.position.row][y.position.col].piece={type:e,color:t.color};const c="white"===t.color?"black":"white",r=B(c,o),i=r&&R(c,o),s={piece:w[e][t.color],from:C(O.lastMove.from.row,O.lastMove.from.col),to:C(y.position.row,y.position.col),capture:"pawn"===O.lastMove.piece.type&&O.lastMove.from.col!==y.position.col,check:r,checkmate:i};x(null),n(s,o)}}),"checkmate"===t&&Object(s.jsx)(h,{winner:"white"===o?"black":"white",onNewGame:r})]})};t(16);var m=e=>{let{moves:o}=e;const t=e=>{let o=e.piece;return e.capture&&(o+="x"),o+=e.to,e.checkmate?o+="#":e.check&&(o+="+"),o};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h3",{className:"history-title",children:"Move History"}),Object(s.jsx)("div",{className:"moves-container",children:0===o.length?Object(s.jsx)("div",{className:"no-moves",children:"No moves yet"}):Object(s.jsx)("div",{className:"moves-list",children:o.map(((e,o)=>Object(s.jsxs)("div",{className:"move-entry",children:[Object(s.jsxs)("span",{className:"move-number",children:[Math.floor(o/2)+1,"."]}),Object(s.jsx)("span",{className:"move-text ".concat(o%2===0?"white":"black"),children:t(e)})]},o)))})})]})};t(17);var j=e=>{let{onSelectMode:o,username:t}=e;return Object(s.jsxs)("div",{className:"game-mode-selector",children:[Object(s.jsxs)("h2",{children:["Welcome, ",t,"!"]}),Object(s.jsx)("p",{children:"Choose your game mode:"}),Object(s.jsxs)("div",{className:"mode-buttons",children:[Object(s.jsxs)("button",{className:"mode-button computer",onClick:()=>o("computer"),children:[Object(s.jsx)("span",{className:"icon",children:"\ud83e\udd16"}),Object(s.jsx)("span",{className:"label",children:"Play vs Computer"})]}),Object(s.jsxs)("button",{className:"mode-button player",onClick:()=>o("player"),children:[Object(s.jsx)("span",{className:"icon",children:"\ud83d\udc65"}),Object(s.jsx)("span",{className:"label",children:"Play vs Player"})]})]})]})};t(18);var k=e=>{let{pieces:o,color:t}=e;const c=e=>({king:{white:"\u2654",black:"\u265a"},queen:{white:"\u2655",black:"\u265b"},rook:{white:"\u2656",black:"\u265c"},bishop:{white:"\u2657",black:"\u265d"},knight:{white:"\u2658",black:"\u265e"},pawn:{white:"\u2659",black:"\u265f"}}[e.type][e.color]),n={queen:9,rook:5,bishop:3,knight:3,pawn:1,king:0},r=[...o].sort(((e,o)=>n[o.type]-n[e.type]));return Object(s.jsxs)("div",{className:"captured-pieces ".concat(t),children:[Object(s.jsxs)("div",{className:"captured-pieces-label",children:["white"===t?"White":"Black"," captures:"]}),Object(s.jsx)("div",{className:"captured-pieces-list",children:r.map(((e,o)=>Object(s.jsx)("span",{className:"captured-piece",children:c(e)},o)))})]})};const v={pawn:1,knight:3,bishop:3,rook:5,queen:9,king:100},O={pawn:[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],knight:[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],bishop:[[-2,-1,-1,-1,-1,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,1,1,.5,0,-1],[-1,.5,.5,1,1,.5,.5,-1],[-1,0,1,1,1,1,0,-1],[-1,1,1,1,1,1,1,-1],[-1,.5,0,0,0,0,.5,-1],[-2,-1,-1,-1,-1,-1,-1,-2]],rook:[[0,0,0,0,0,0,0,0],[.5,1,1,1,1,1,1,.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[0,0,0,.5,.5,0,0,0]],queen:[[-2,-1,-1,-.5,-.5,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,.5,.5,.5,0,-1],[-.5,0,.5,.5,.5,.5,0,-.5],[0,0,.5,.5,.5,.5,0,-.5],[-1,.5,.5,.5,.5,.5,0,-1],[-1,0,.5,0,0,0,0,-1],[-2,-1,-1,-.5,-.5,-1,-1,-2]],king:[[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-2,-3,-3,-4,-4,-3,-3,-2],[-1,-2,-2,-2,-2,-2,-2,-1],[2,2,0,0,0,0,2,2],[2,3,1,0,0,1,3,2]]};class g{getValidMoves(e,o,t){const c=[],n={pawn:"white"===o.color?[[-1,0]]:[[1,0]],knight:[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]],bishop:[[-1,-1],[-1,1],[1,-1],[1,1]],rook:[[-1,0],[1,0],[0,-1],[0,1]],queen:[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],king:[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]]},r=["bishop","rook","queen"].includes(o.type);if("pawn"===o.type){const n="white"===o.color?-1:1,r="white"===o.color?6:1;return this.isValidPosition(e.row+n,e.col)&&!t[e.row+n][e.col].piece&&(c.push({row:e.row+n,col:e.col}),e.row!==r||t[e.row+2*n][e.col].piece||c.push({row:e.row+2*n,col:e.col})),[-1,1].forEach((r=>{const i=e.row+n,l=e.col+r;if(this.isValidPosition(i,l)){const e=t[i][l].piece;e&&e.color!==o.color&&c.push({row:i,col:l})}})),c}return n[o.type].forEach((n=>{let[i,l]=n,s=e.row+i,a=e.col+l;for(;this.isValidPosition(s,a);){const e=t[s][a];if(e.piece){e.piece.color!==o.color&&c.push({row:s,col:a});break}if(c.push({row:s,col:a}),!r)break;s+=i,a+=l}})),c}isValidPosition(e,o){return e>=0&&e<8&&o>=0&&o<8}evaluatePosition(e){let o=0;for(let t=0;t<8;t++)for(let c=0;c<8;c++){const n=e[t][c].piece;if(n){const e=v[n.type]+O[n.type]["white"===n.color?t:7-t][c];o+="black"===n.color?e:-e}}return o}minimax(e,o,t,c,n){if(0===o)return{score:this.evaluatePosition(e)};const r=[];for(let i=0;i<8;i++)for(let o=0;o<8;o++){const t=e[i][o].piece;if(t&&t.color===(n?"black":"white")){this.getValidMoves({row:i,col:o},t,e).forEach((e=>{r.push({from:{row:i,col:o},to:e})}))}}if(n){let n,i=-1/0;for(const l of r){const r=this.makeMove(e,l),s=this.minimax(r,o-1,t,c,!1);if(s.score>i&&(i=s.score,n=l),c<=(t=Math.max(t,s.score)))break}return{score:i,move:n}}{let n,i=1/0;for(const l of r){const r=this.makeMove(e,l),s=this.minimax(r,o-1,t,c,!0);if(s.score<i&&(i=s.score,n=l),(c=Math.min(c,s.score))<=t)break}return{score:i,move:n}}}makeMove(e,o){const t=e.map((e=>e.map((e=>Object(l.a)({},e)))));return t[o.to.row][o.to.col].piece=t[o.from.row][o.from.col].piece,t[o.from.row][o.from.col].piece=null,t}getBestMove(e){return this.minimax(e,3,-1/0,1/0,!0).move||null}}var y=t(5);t(19);const x=["isFullscreen","toggleFullscreen"];var N=e=>{let{isFullscreen:o,toggleFullscreen:t}=e,c=Object(y.a)(e,x);return Object(s.jsx)("button",Object(l.a)(Object(l.a)({type:"button",className:"fullscreen-button",onClick:t,"aria-label":o?"Exit fullscreen":"Enter fullscreen",title:o?"Exit fullscreen":"Enter fullscreen"},c),{},{children:o?"\u2935\ufe0f":"\u2934\ufe0f"}))};const E=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),M=async()=>{try{if("screen"in window&&"orientation"in window.screen)return await window.screen.orientation.lock("landscape"),!0}catch(e){console.warn("Failed to lock orientation:",e)}return!1};t(20);var S=e=>{let{isGameStarted:o}=e;const[t,n]=Object(c.useState)(!1),[r,i]=Object(c.useState)(!1),l=Object(c.useCallback)((()=>{const e=E();i(e),e&&window.matchMedia("(orientation: portrait)").matches?(n(!0),o&&M()):n(!1)}),[o]);return Object(c.useEffect)((()=>{l();const e=(e=>{const o=()=>{e()};return window.addEventListener("orientationchange",o),window.addEventListener("resize",o),()=>{window.removeEventListener("orientationchange",o),window.removeEventListener("resize",o)}})(l);return()=>{e()}}),[l]),o&&r&&t?Object(s.jsx)("div",{className:"rotate-prompt-overlay",children:Object(s.jsxs)("div",{className:"rotate-prompt",children:[Object(s.jsx)("div",{className:"rotate-icon",children:"\ud83d\udd04"}),Object(s.jsx)("h3",{children:"Please rotate your device"}),Object(s.jsx)("p",{children:"For the best chess experience, please rotate your device to landscape mode."})]})}):null};t(21);var C=e=>{let{username:o}=e;const[t,n]=Object(c.useState)("white"),[r,i]=Object(c.useState)("active"),[a,u]=Object(c.useState)([]),[p,h]=Object(c.useState)([]),[w,b]=Object(c.useState)(!1),[d,v]=Object(c.useState)(null),[O]=Object(c.useState)((()=>new g)),[y,x]=Object(c.useState)({white:[],black:[]}),[C,P]=Object(c.useState)(!1),[q,A]=Object(c.useState)(!1),F=Object(c.useRef)(null);Object(c.useEffect)((()=>{if("computer"===d&&"black"===t){const e=setTimeout((()=>{const e=p[p.length-1],o=O.getBestMove(e?e.board:L());if(o){const t=I(o.from.row,o.from.col),c=I(o.to.row,o.to.col),n=null===e||void 0===e?void 0:e.board[o.from.row][o.from.col].piece;n&&V({piece:G(n.type,n.color),from:t,to:c},U(e?e.board:L(),o))}}),500);return()=>clearTimeout(e)}}),[t,d,p]);const L=()=>{const e=[];for(let o=0;o<8;o++){const t=[];for(let e=0;e<8;e++)t.push({piece:B(o,e),color:(o+e)%2===0?"white":"black"});e.push(t)}return e},B=(e,o)=>{if(e<=1){const t="black";if(1===e)return{type:"pawn",color:t};return{type:["rook","knight","bishop","queen","king","bishop","knight","rook"][o],color:t}}if(e>=6){const t="white";if(6===e)return{type:"pawn",color:t};return{type:["rook","knight","bishop","queen","king","bishop","knight","rook"][o],color:t}}return null},G=(e,o)=>({king:{white:"\u2654",black:"\u265a"},queen:{white:"\u2655",black:"\u265b"},rook:{white:"\u2656",black:"\u265c"},bishop:{white:"\u2657",black:"\u265d"},knight:{white:"\u2658",black:"\u265e"},pawn:{white:"\u2659",black:"\u265f"}}[e][o]),I=(e,o)=>"".concat(["a","b","c","d","e","f","g","h"][o]).concat(8-e),U=(e,o)=>{const t=e.map((e=>e.map((e=>Object(l.a)({},e)))));return t[o.to.row][o.to.col].piece=t[o.from.row][o.from.col].piece,t[o.from.row][o.from.col].piece=null,t},V=(e,o)=>{u([...a,e]),n("white"===t?"black":"white");const c=e.checkmate?"checkmate":e.check?"check":"active";if(i(c),e.capture){const o=p[p.length-1];if(o){R(e.from);const c=R(e.to),n=o.board[c.row][c.col].piece;if(n){const e="white"===t?"white":"black";x((o=>Object(l.a)(Object(l.a)({},o),{},{[e]:[...o[e],n]})))}}}h([...p,{board:o,currentPlayer:t,gameStatus:r,move:e}]),b(!0)},R=e=>{const o=e.charAt(0).toLowerCase();return{row:8-parseInt(e.charAt(1)),col:o.charCodeAt(0)-"a".charCodeAt(0)}},z=Object(c.useCallback)((async e=>{if(v(e),A(!0),E())try{await M()}catch(o){console.warn("Could not lock orientation:",o)}n("white"),i("active"),u([]),h([]),b(!1),x({white:[],black:[]})}),[]),H=Object(c.useCallback)((()=>{z(d)}),[d,z]);return Object(c.useEffect)((()=>{const e=()=>{P(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}}),[]),Object(c.useEffect)((()=>()=>{E()&&(async()=>{if("screen"in window&&"orientation"in window.screen)try{await window.screen.orientation.unlock()}catch(e){console.warn("Failed to unlock orientation:",e)}})()}),[]),d?Object(s.jsxs)("div",{className:"chess-game ".concat(C?"fullscreen":""),ref:F,children:[Object(s.jsx)(S,{isGameStarted:q}),Object(s.jsx)(N,{isFullscreen:C,toggleFullscreen:()=>{var e;document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),P(!1)):(null===(e=F.current)||void 0===e||e.requestFullscreen().catch((e=>{alert("Error attempting to enable fullscreen: ".concat(e.message))})),P(!0))}}),Object(s.jsxs)("div",{className:"game-info",children:[Object(s.jsxs)("div",{className:"current-player",children:["Current Player: ",t.charAt(0).toUpperCase()+t.slice(1)]}),Object(s.jsxs)("div",{className:"game-controls",children:[Object(s.jsx)("button",{className:"control-button undo-button",onClick:()=>{if(0!==p.length)if("computer"===d){const e=[...a];e.pop(),e.pop(),u(e);const o=[...p];o.pop(),o.pop(),h(o);const t=o[o.length-1];t?(n(t.currentPlayer),i(t.gameStatus)):(n("white"),i("active")),b(o.length>0)}else{const e=[...a];e.pop(),u(e);const o=[...p],t=o.pop();h(o),t&&(n(t.currentPlayer),i(t.gameStatus)),b(o.length>0)}},disabled:!w,title:"Undo last move",children:"\u21a9 Undo"}),Object(s.jsx)("button",{className:"control-button new-game-button",onClick:H,title:"Start a new game",children:"New Game"}),Object(s.jsx)("button",{className:"control-button mode-button",onClick:()=>v(null),title:"Change game mode",children:"Change Mode"})]}),Object(s.jsxs)("div",{className:"game-status",children:["Status: ",r.charAt(0).toUpperCase()+r.slice(1)]}),Object(s.jsxs)("div",{className:"game-mode",children:["Mode: ","computer"===d?"vs Computer":"vs Player"]})]}),Object(s.jsxs)("div",{className:"game-container",children:[Object(s.jsxs)("div",{className:"game-board",children:[Object(s.jsx)(k,{pieces:y.black,color:"black"}),Object(s.jsx)(f,{currentPlayer:t,gameStatus:r,onMove:V,onNewGame:H,boardHistory:p}),Object(s.jsx)(k,{pieces:y.white,color:"white"})]}),Object(s.jsx)("div",{className:"move-history",children:Object(s.jsx)(m,{moves:a})})]})]}):Object(s.jsx)(j,{username:o,onSelectMode:z})};var P=()=>{const[e,o]=Object(c.useState)(""),[t,n]=Object(c.useState)(!1),[r,i]=Object(c.useState)(!0),l=e=>{console.log("Incomplete payment found:",e)};return Object(c.useEffect)((()=>{(async()=>{try{if(window.Pi){const e=await window.Pi.authenticate(["username"],l);o(e.user.username),n(!0)}}catch(e){console.error("Authentication error:",e)}finally{i(!1)}})()}),[]),t?Object(s.jsx)(C,{username:e}):Object(s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#f5f7fa"},children:Object(s.jsxs)("div",{style:{padding:"20px",borderRadius:"10px",backgroundColor:"white",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",textAlign:"center"},children:[Object(s.jsx)("h2",{children:"Connecting to Pi Network..."}),Object(s.jsx)("p",{children:"Please wait while we authenticate your Pi account."})]})})};window.Pi&&(window.Pi.init={sandbox:!0}),i.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(P,{})}),document.getElementById("root"))}],[[22,1,2]]]);