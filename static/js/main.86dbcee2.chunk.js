(this["webpackJsonpapp-platform-demo-frontend"]=this["webpackJsonpapp-platform-demo-frontend"]||[]).push([[0],[,,,,,,,,,,,function(e,o,t){},function(e,o,t){},function(e,o,t){},,function(e,o,t){},function(e,o,t){},function(e,o,t){},function(e,o,t){},function(e,o,t){},function(e,o,t){},function(e,o,t){"use strict";t.r(o);var c=t(1),n=t.n(c),r=t(4),l=t.n(r),i=(t(10),t(11),t(2)),s=(t(12),t(13),t(0));const a={queen:{white:"\u2655",black:"\u265b"},rook:{white:"\u2656",black:"\u265c"},bishop:{white:"\u2657",black:"\u265d"},knight:{white:"\u2658",black:"\u265e"}},u={queen:"Moves any number of squares diagonally, horizontally, or vertically",rook:"Moves any number of squares horizontally or vertically",bishop:"Moves any number of squares diagonally",knight:"Moves in an L-shape: 2 squares in one direction and 1 square perpendicular"};var p=e=>{let{color:o,position:t,onSelect:n}=e;return Object(c.useEffect)((()=>{const e=e=>{"Escape"===e.key&&n("queen")};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[n]),Object(s.jsx)("div",{className:"promotion-overlay",children:Object(s.jsxs)("div",{className:"promotion-dialog",style:{position:"absolute",left:"".concat(t.x,"px"),top:"".concat(t.y,"px"),transform:"translate(-50%, -50%)",animation:"slideIn 0.3s ease-out"},role:"dialog","aria-modal":"true","aria-label":"Pawn promotion selection",children:[Object(s.jsx)("div",{className:"promotion-header",children:"Choose a piece for promotion"}),Object(s.jsx)("div",{className:"promotion-options",children:["queen","rook","bishop","knight"].map((e=>Object(s.jsxs)("button",{className:"promotion-option",onClick:()=>n(e),title:u[e],"aria-label":"Promote to ".concat(e),children:[Object(s.jsx)("div",{className:"piece-symbol",children:a[e][o]}),Object(s.jsx)("div",{className:"piece-name",children:e.toUpperCase()})]},e)))}),Object(s.jsx)("div",{className:"promotion-footer",children:"Press ESC to cancel (default: Queen)"})]})})};t(15);var h=e=>{let{winner:o,onNewGame:t}=e;return Object(s.jsx)("div",{className:"checkmate-overlay",children:Object(s.jsx)("div",{className:"checkmate-popup",children:Object(s.jsxs)("div",{className:"checkmate-content",children:[Object(s.jsx)("h2",{children:"Checkmate!"}),Object(s.jsxs)("p",{children:[o.charAt(0).toUpperCase()+o.slice(1)," wins!"]}),Object(s.jsx)("button",{className:"new-game-button",onClick:t,children:"New Game"})]})})})};const w={king:{white:"\u2654",black:"\u265a"},queen:{white:"\u2655",black:"\u265b"},rook:{white:"\u2656",black:"\u265c"},bishop:{white:"\u2657",black:"\u265d"},knight:{white:"\u2658",black:"\u265e"},pawn:{white:"\u2659",black:"\u265f"}},d=["a","b","c","d","e","f","g","h"],m=["8","7","6","5","4","3","2","1"];var b=e=>{let{currentPlayer:o,gameStatus:t,onMove:n,onNewGame:r,boardHistory:l}=e;const a=Object(c.useCallback)((()=>{const e=[];for(let o=0;o<8;o++){const t=[];for(let e=0;e<8;e++)t.push({piece:C(o,e),color:(o+e)%2===0?"white":"black"});e.push(t)}return e}),[]),[u,b]=Object(c.useState)(a()),[f,j]=Object(c.useState)(null),[k,v]=Object(c.useState)([]),[g,y]=Object(c.useState)({lastMove:null,canEnPassant:null}),[O,x]=Object(c.useState)(null),[N,E]=Object(c.useState)(null),M=Object(c.useRef)(null);function C(e,o){if(e<=1){const t="black";if(1===e)return{type:"pawn",color:t};return{type:["rook","knight","bishop","queen","king","bishop","knight","rook"][o],color:t}}if(e>=6){const t="white";if(6===e)return{type:"pawn",color:t};return{type:["rook","knight","bishop","queen","king","bishop","knight","rook"][o],color:t}}return null}function P(e,o){return"".concat(d[o]).concat(8-e)}function S(e){const o=e.charAt(0).toLowerCase();return{row:8-parseInt(e.charAt(1)),col:d.indexOf(o)}}function q(e,o,t){var c;if("king"===(null===(c=g.lastMove)||void 0===c?void 0:c.piece.type)&&g.lastMove.piece.color===t)return!1;const n="white"===t?7:0;if(e.row!==n||4!==e.col)return!1;const r=u[e.row][e.col].piece,l=u[o.row][o.col].piece;if(!r||!l||"king"!==r.type||"rook"!==l.type)return!1;const s=o.col<e.col?-1:1;for(let i=e.col+s;i!==o.col;i+=s)if(u[n][i].piece)return!1;for(let a=e.col;a!==e.col+3*s;a+=s){const o=u.map((e=>e.map((e=>Object(i.a)({},e)))));if(o[n][a].piece=r,o[n][e.col].piece=null,B(t,o))return!1}return!0}function L(e,o,t){const c=[];switch(o.type){case"pawn":const n="white"===o.color?-1:1,r="white"===o.color?6:1;let l=e.row+n;if(l>=0&&l<8&&!t[l][e.col].piece&&(c.push({row:l,col:e.col}),e.row===r)){const o=e.row+2*n;t[o][e.col].piece||c.push({row:o,col:e.col})}[-1,1].forEach((n=>{const r=e.col+n;if(r>=0&&r<8&&l>=0&&l<8){const e=t[l][r].piece;e&&e.color!==o.color&&c.push({row:l,col:r})}}));break;case"knight":[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]].forEach((n=>{let[r,l]=n;const i=e.row+r,s=e.col+l;if(i>=0&&i<8&&s>=0&&s<8){const e=t[i][s].piece;e&&e.color===o.color||c.push({row:i,col:s})}}));break;case"bishop":[[-1,-1],[-1,1],[1,-1],[1,1]].forEach((n=>{let[r,l]=n,i=e.row+r,s=e.col+l;for(;i>=0&&i<8&&s>=0&&s<8;){const e=t[i][s].piece;if(e){e.color!==o.color&&c.push({row:i,col:s});break}c.push({row:i,col:s}),i+=r,s+=l}}));break;case"rook":[[-1,0],[1,0],[0,-1],[0,1]].forEach((n=>{let[r,l]=n,i=e.row+r,s=e.col+l;for(;i>=0&&i<8&&s>=0&&s<8;){const e=t[i][s].piece;if(e){e.color!==o.color&&c.push({row:i,col:s});break}c.push({row:i,col:s}),i+=r,s+=l}}));break;case"queen":[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].forEach((n=>{let[r,l]=n,i=e.row+r,s=e.col+l;for(;i>=0&&i<8&&s>=0&&s<8;){const e=t[i][s].piece;if(e){e.color!==o.color&&c.push({row:i,col:s});break}c.push({row:i,col:s}),i+=r,s+=l}}));break;case"king":[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].forEach((n=>{let[r,l]=n;const i=e.row+r,s=e.col+l;if(i>=0&&i<8&&s>=0&&s<8){const e=t[i][s].piece;e&&e.color===o.color||c.push({row:i,col:s})}}))}return c}function A(e,o){for(let t=0;t<8;t++)for(let c=0;c<8;c++){const n=o[t][c].piece;if("king"===(null===n||void 0===n?void 0:n.type)&&n.color===e)return{row:t,col:c}}return null}function F(e,o,t){const c="white"===o?1:-1,n=[{row:e.row+c,col:e.col-1},{row:e.row+c,col:e.col+1}];for(const a of n)if(a.row>=0&&a.row<8&&a.col>=0&&a.col<8){const e=t[a.row][a.col].piece;if("pawn"===(null===e||void 0===e?void 0:e.type)&&e.color===o)return!0}const r=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[a,u]of r){const c=e.row+a,n=e.col+u;if(c>=0&&c<8&&n>=0&&n<8){const e=t[c][n].piece;if("knight"===(null===e||void 0===e?void 0:e.type)&&e.color===o)return!0}}const l=[[-1,-1],[-1,1],[1,-1],[1,1]];for(const[a,u]of l){let c=e.row+a,n=e.col+u;for(;c>=0&&c<8&&n>=0&&n<8;){const e=t[c][n].piece;if(e){if(e.color===o&&("bishop"===e.type||"queen"===e.type))return!0;break}c+=a,n+=u}}const i=[[-1,0],[1,0],[0,-1],[0,1]];for(const[a,u]of i){let c=e.row+a,n=e.col+u;for(;c>=0&&c<8&&n>=0&&n<8;){const e=t[c][n].piece;if(e){if(e.color===o&&("rook"===e.type||"queen"===e.type))return!0;break}c+=a,n+=u}}const s=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(const[a,u]of s){const c=e.row+a,n=e.col+u;if(c>=0&&c<8&&n>=0&&n<8){const e=t[c][n].piece;if("king"===(null===e||void 0===e?void 0:e.type)&&e.color===o)return!0}}return!1}function B(e,o){const t=A(e,o);if(!t)return!1;return F(t,"white"===e?"black":"white",o)}function I(e,o){const t=function(e,o){const t=A(e,o);if(!t)return[];const c=[],n="white"===e?"black":"white",r="white"===n?1:-1,l=[{row:t.row+r,col:t.col-1},{row:t.row+r,col:t.col+1}];for(const a of l)if(a.row>=0&&a.row<8&&a.col>=0&&a.col<8){const e=o[a.row][a.col].piece;"pawn"===(null===e||void 0===e?void 0:e.type)&&e.color===n&&c.push({row:a.row,col:a.col})}const i=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[a,u]of i){const e=t.row+a,r=t.col+u;if(e>=0&&e<8&&r>=0&&r<8){const t=o[e][r].piece;"knight"===(null===t||void 0===t?void 0:t.type)&&t.color===n&&c.push({row:e,col:r})}}const s=[[-1,-1],[-1,1],[1,-1],[1,1],[-1,0],[1,0],[0,-1],[0,1]];for(const[a,u]of s){let e=t.row+a,r=t.col+u;for(;e>=0&&e<8&&r>=0&&r<8;){const t=o[e][r].piece;if(t){if(t.color===n){const o=Math.abs(a)===Math.abs(u);(!o||"bishop"!==t.type&&"queen"!==t.type)&&(o||"rook"!==t.type&&"queen"!==t.type)||c.push({row:e,col:r})}break}e+=a,r+=u}}return c}(e,o);if(0===t.length)return!0;if(t.length>1)return R(e,o);const c=A(e,o),n=t[0],r=o[n.row][n.col].piece.type;if("knight"===r||"pawn"===r)return V(e,n,o)||R(e,o);return function(e,o){const t=[],c=Math.sign(o.row-e.row),n=Math.sign(o.col-e.col);let r=e.row+c,l=e.col+n;for(;r!==o.row||l!==o.col;)t.push({row:r,col:l}),r+=c,l+=n;return t}(c,n).some((t=>G(t,e,o)))||V(e,n,o)||R(e,o)}function G(e,o,t){for(let c=0;c<8;c++)for(let n=0;n<8;n++){const r=t[c][n].piece;if(r&&r.color===o){if(L({row:c,col:n},r,t).some((o=>o.row===e.row&&o.col===e.col))){const r=t.map((e=>e.map((e=>Object(i.a)({},e)))));if(r[e.row][e.col].piece=r[c][n].piece,r[c][n].piece=null,!B(o,r))return!0}}}return!1}function V(e,o,t){return G(o,e,t)}function R(e,o){const t=A(e,o),c=o[t.row][t.col].piece;return L(t,c,o).some((n=>{const r=o.map((e=>e.map((e=>Object(i.a)({},e)))));return r[n.row][n.col].piece=c,r[t.row][t.col].piece=null,!F(n,"white"===e?"black":"white",r)}))}function U(e,o){return!!B(e,o)&&!I(e,o)}function z(e,c){if("checkmate"!==t&&!O)if(f){if(k.some((o=>o.row===e&&o.col===c))){const t=u.map((e=>e.map((e=>Object(i.a)({},e))))),r=t[f.row][f.col].piece,l=t[e][c].piece,s=!!l||"pawn"===r.type&&c!==f.col;if("king"===r.type&&2===Math.abs(c-f.col)){const o=c>f.col?7:0,n=c>f.col?c-1:c+1;t[e][n].piece=t[e][o].piece,t[e][o].piece=null}if("pawn"===r.type&&c!==f.col&&!l){t[f.row][c].piece=null}t[e][c].piece=r,t[f.row][f.col].piece=null,E({from:{row:f.row,col:f.col},to:{row:e,col:c}});const a={lastMove:{piece:r,from:Object(i.a)({},f),to:{row:e,col:c}},canEnPassant:null};if("pawn"===r.type&&2===Math.abs(e-f.row)&&(a.canEnPassant={row:e,col:c}),b(t),y(a),"pawn"===r.type){if("white"===r.color&&0===e||"black"===r.color&&7===e){if(function(e){const o=u[e.row][e.col].piece;if(!o||"pawn"!==o.type)return!1;if(("white"===o.color&&0===e.row||"black"===o.color&&7===e.row)&&M.current){const o=M.current.querySelector('[data-position="'.concat(e.row,"-").concat(e.col,'"]'));if(o){const t=o.getBoundingClientRect(),c=M.current.getBoundingClientRect(),n=t.left-c.left+t.width/2,r=t.top-c.top+t.height/2;return x({position:e,dialogPosition:{x:n,y:r}}),!0}}return!1}({row:e,col:c}))return}}const p="white"===o?"black":"white",h=B(p,t),d=h&&U(p,t),m={piece:w[r.type][r.color],from:P(f.row,f.col),to:P(e,c),capture:s,check:h,checkmate:d};n(m,t)}j(null),v([])}else{const t=u[e][c].piece;t&&t.color===o&&(j({row:e,col:c}),v(function(e,t){let c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=t[e.row][e.col].piece;if(!n||n.color!==o&&!c)return[];let r=L(e,n,t);if(!c&&("king"!==n.type||B(n.color,t)||(q(e,{row:e.row,col:7},n.color)&&r.push({row:e.row,col:e.col+2}),q(e,{row:e.row,col:0},n.color)&&r.push({row:e.row,col:e.col-2})),"pawn"===n.type&&g.canEnPassant)){const o="white"===n.color?3:4;e.row===o&&[-1,1].forEach((o=>{var t;e.col+o===(null===(t=g.canEnPassant)||void 0===t?void 0:t.col)&&r.push({row:e.row+("white"===n.color?-1:1),col:e.col+o})}))}c||(r=r.filter((o=>{const c=t.map((e=>e.map((e=>Object(i.a)({},e)))));return c[o.row][o.col].piece=c[e.row][e.col].piece,c[e.row][e.col].piece=null,!B(n.color,c)})));return r}({row:e,col:c},u)))}}return Object(c.useEffect)((()=>{if(l.length>0){const e=l[l.length-1];if(b(e.board),e.move){const o=S(e.move.from),t=S(e.move.to);E({from:o,to:t})}}else b(a()),E(null)}),[l,a]),Object(s.jsxs)("div",{className:"chess-board",ref:M,children:[u.map(((e,c)=>Object(s.jsx)("div",{className:"board-row",children:e.map(((e,n)=>{var r;const l=(null===N||void 0===N?void 0:N.from.row)===c&&(null===N||void 0===N?void 0:N.from.col)===n,i=(null===N||void 0===N?void 0:N.to.row)===c&&(null===N||void 0===N?void 0:N.to.col)===n,a="king"===(null===(r=e.piece)||void 0===r?void 0:r.type)&&e.piece.color===o&&"check"===t;return Object(s.jsx)("div",{className:"square ".concat(e.color," ").concat((null===f||void 0===f?void 0:f.row)===c&&(null===f||void 0===f?void 0:f.col)===n?"selected":""," ").concat(k.some((e=>e.row===c&&e.col===n))?"valid-move":""," ").concat(l||i?"last-move":""," ").concat(a?"check":""),"data-position":"".concat(c,"-").concat(n),"data-file":7===c?d[n]:"","data-rank":0===n?m[c]:"",onClick:()=>z(c,n),children:e.piece&&Object(s.jsx)("div",{className:"piece ".concat(i?"piece-moving":""),children:w[e.piece.type][e.piece.color]})},"".concat(c,"-").concat(n))}))},c))),O&&Object(s.jsx)(p,{color:u[O.position.row][O.position.col].piece.color,position:O.dialogPosition,onSelect:function(e){if(!O||!g.lastMove)return;const o=u.map((e=>e.map((e=>Object(i.a)({},e))))),t=o[O.position.row][O.position.col].piece;o[O.position.row][O.position.col].piece={type:e,color:t.color};const c="white"===t.color?"black":"white",r=B(c,o),l=r&&U(c,o),s={piece:w[e][t.color],from:P(g.lastMove.from.row,g.lastMove.from.col),to:P(O.position.row,O.position.col),capture:"pawn"===g.lastMove.piece.type&&g.lastMove.from.col!==O.position.col,check:r,checkmate:l};x(null),n(s,o)}}),"checkmate"===t&&Object(s.jsx)(h,{winner:"white"===o?"black":"white",onNewGame:r})]})};t(16);var f=e=>{let{moves:o}=e;const t=e=>{let o=e.piece;return e.capture&&(o+="x"),o+=e.to,e.checkmate?o+="#":e.check&&(o+="+"),o};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h3",{className:"history-title",children:"Move History"}),Object(s.jsx)("div",{className:"moves-container",children:0===o.length?Object(s.jsx)("div",{className:"no-moves",children:"No moves yet"}):Object(s.jsx)("div",{className:"moves-list",children:o.map(((e,o)=>Object(s.jsxs)("div",{className:"move-entry",children:[Object(s.jsxs)("span",{className:"move-number",children:[Math.floor(o/2)+1,"."]}),Object(s.jsx)("span",{className:"move-text ".concat(o%2===0?"white":"black"),children:t(e)})]},o)))})})]})};t(17);var j=e=>{let{onSelectMode:o,username:t}=e;return Object(s.jsxs)("div",{className:"game-mode-selector",children:[Object(s.jsxs)("h2",{children:["Welcome, ",t,"!"]}),Object(s.jsx)("p",{children:"Choose your game mode:"}),Object(s.jsxs)("div",{className:"mode-buttons",children:[Object(s.jsxs)("button",{className:"mode-button computer",onClick:()=>o("computer"),children:[Object(s.jsx)("span",{className:"icon",children:"\ud83e\udd16"}),Object(s.jsx)("span",{className:"label",children:"Play vs Computer"})]}),Object(s.jsxs)("button",{className:"mode-button player",onClick:()=>o("player"),children:[Object(s.jsx)("span",{className:"icon",children:"\ud83d\udc65"}),Object(s.jsx)("span",{className:"label",children:"Play vs Player"})]})]})]})};t(18);var k=e=>{let{pieces:o,color:t}=e;const c=e=>({king:{white:"\u2654",black:"\u265a"},queen:{white:"\u2655",black:"\u265b"},rook:{white:"\u2656",black:"\u265c"},bishop:{white:"\u2657",black:"\u265d"},knight:{white:"\u2658",black:"\u265e"},pawn:{white:"\u2659",black:"\u265f"}}[e.type][e.color]),n={queen:9,rook:5,bishop:3,knight:3,pawn:1,king:0},r=[...o].sort(((e,o)=>n[o.type]-n[e.type]));return Object(s.jsxs)("div",{className:"captured-pieces ".concat(t),children:[Object(s.jsxs)("div",{className:"captured-pieces-label",children:["white"===t?"White":"Black"," captures:"]}),Object(s.jsx)("div",{className:"captured-pieces-list",children:r.map(((e,o)=>Object(s.jsx)("span",{className:"captured-piece",children:c(e)},o)))})]})};const v={pawn:1,knight:3,bishop:3,rook:5,queen:9,king:100},g={pawn:[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],knight:[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],bishop:[[-2,-1,-1,-1,-1,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,1,1,.5,0,-1],[-1,.5,.5,1,1,.5,.5,-1],[-1,0,1,1,1,1,0,-1],[-1,1,1,1,1,1,1,-1],[-1,.5,0,0,0,0,.5,-1],[-2,-1,-1,-1,-1,-1,-1,-2]],rook:[[0,0,0,0,0,0,0,0],[.5,1,1,1,1,1,1,.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[0,0,0,.5,.5,0,0,0]],queen:[[-2,-1,-1,-.5,-.5,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,.5,.5,.5,0,-1],[-.5,0,.5,.5,.5,.5,0,-.5],[0,0,.5,.5,.5,.5,0,-.5],[-1,.5,.5,.5,.5,.5,0,-1],[-1,0,.5,0,0,0,0,-1],[-2,-1,-1,-.5,-.5,-1,-1,-2]],king:[[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-2,-3,-3,-4,-4,-3,-3,-2],[-1,-2,-2,-2,-2,-2,-2,-1],[2,2,0,0,0,0,2,2],[2,3,1,0,0,1,3,2]]};class y{getValidMoves(e,o,t){const c=[],n={pawn:"white"===o.color?[[-1,0]]:[[1,0]],knight:[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]],bishop:[[-1,-1],[-1,1],[1,-1],[1,1]],rook:[[-1,0],[1,0],[0,-1],[0,1]],queen:[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],king:[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]]},r=["bishop","rook","queen"].includes(o.type);if("pawn"===o.type){const n="white"===o.color?-1:1,r="white"===o.color?6:1;return this.isValidPosition(e.row+n,e.col)&&!t[e.row+n][e.col].piece&&(c.push({row:e.row+n,col:e.col}),e.row!==r||t[e.row+2*n][e.col].piece||c.push({row:e.row+2*n,col:e.col})),[-1,1].forEach((r=>{const l=e.row+n,i=e.col+r;if(this.isValidPosition(l,i)){const e=t[l][i].piece;e&&e.color!==o.color&&c.push({row:l,col:i})}})),c}return n[o.type].forEach((n=>{let[l,i]=n,s=e.row+l,a=e.col+i;for(;this.isValidPosition(s,a);){const e=t[s][a];if(e.piece){e.piece.color!==o.color&&c.push({row:s,col:a});break}if(c.push({row:s,col:a}),!r)break;s+=l,a+=i}})),c}isValidPosition(e,o){return e>=0&&e<8&&o>=0&&o<8}evaluatePosition(e){let o=0;for(let t=0;t<8;t++)for(let c=0;c<8;c++){const n=e[t][c].piece;if(n){const e=v[n.type]+g[n.type]["white"===n.color?t:7-t][c];o+="black"===n.color?e:-e}}return o}minimax(e,o,t,c,n){if(0===o)return{score:this.evaluatePosition(e)};const r=[];for(let l=0;l<8;l++)for(let o=0;o<8;o++){const t=e[l][o].piece;if(t&&t.color===(n?"black":"white")){this.getValidMoves({row:l,col:o},t,e).forEach((e=>{r.push({from:{row:l,col:o},to:e})}))}}if(n){let n,l=-1/0;for(const i of r){const r=this.makeMove(e,i),s=this.minimax(r,o-1,t,c,!1);if(s.score>l&&(l=s.score,n=i),c<=(t=Math.max(t,s.score)))break}return{score:l,move:n}}{let n,l=1/0;for(const i of r){const r=this.makeMove(e,i),s=this.minimax(r,o-1,t,c,!0);if(s.score<l&&(l=s.score,n=i),(c=Math.min(c,s.score))<=t)break}return{score:l,move:n}}}makeMove(e,o){const t=e.map((e=>e.map((e=>Object(i.a)({},e)))));return t[o.to.row][o.to.col].piece=t[o.from.row][o.from.col].piece,t[o.from.row][o.from.col].piece=null,t}getBestMove(e){return this.minimax(e,3,-1/0,1/0,!0).move||null}}var O=t(5);t(19);const x=["isFullscreen","toggleFullscreen"];var N=e=>{let{isFullscreen:o,toggleFullscreen:t}=e,c=Object(O.a)(e,x);return Object(s.jsx)("button",Object(i.a)(Object(i.a)({type:"button",className:"fullscreen-button",onClick:t,"aria-label":o?"Exit fullscreen":"Enter fullscreen",title:o?"Exit fullscreen":"Enter fullscreen"},c),{},{children:o?"\u2935\ufe0f":"\u2934\ufe0f"}))};const E=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),M=async()=>{try{if(S()&&P())return await window.screen.orientation.lock("landscape"),!0}catch(e){console.warn("Failed to lock orientation:",e),P()&&q()}return!1},C=async()=>{try{S()&&await window.screen.orientation.unlock(),document.documentElement.style.transform="",document.documentElement.style.width="",document.documentElement.style.height=""}catch(e){console.warn("Failed to unlock orientation:",e)}},P=()=>window.matchMedia("(orientation: portrait)").matches,S=()=>{var e;return"screen"in window&&"orientation"in window.screen&&"function"===typeof(null===(e=window.screen.orientation)||void 0===e?void 0:e.lock)},q=()=>{if(P()){window.orientation;const e=window.innerWidth,o=window.innerHeight;document.documentElement.style.width="".concat(o,"px"),document.documentElement.style.height="".concat(e,"px"),document.documentElement.style.transform="rotate(90deg) translate(".concat((o-e)/2,"px, ").concat((o-e)/2,"px)"),document.documentElement.style.transformOrigin="center center",document.documentElement.style.overflow="hidden",document.body.style.width="".concat(o,"px"),document.body.style.height="".concat(e,"px"),document.body.style.overflow="hidden"}};t(20);var L=e=>{let{username:o}=e;const[t,n]=Object(c.useState)("white"),[r,l]=Object(c.useState)("active"),[a,u]=Object(c.useState)([]),[p,h]=Object(c.useState)([]),[w,d]=Object(c.useState)(!1),[m,v]=Object(c.useState)(null),[g]=Object(c.useState)((()=>new y)),[O,x]=Object(c.useState)({white:[],black:[]}),[P,S]=Object(c.useState)(!1),[q,L]=Object(c.useState)(!1),A=Object(c.useRef)(null),F=()=>{S(!!document.fullscreenElement)};Object(c.useEffect)((()=>(document.addEventListener("fullscreenchange",F),()=>{document.removeEventListener("fullscreenchange",F)})),[]),Object(c.useEffect)((()=>{q?M().catch(console.error):C().catch(console.error)}),[q]),Object(c.useEffect)((()=>{if("computer"===m&&"black"===t){const e=setTimeout((()=>{const e=p[p.length-1],o=g.getBestMove(e?e.board:B());if(o){const t=V(o.from.row,o.from.col),c=V(o.to.row,o.to.col),n=null===e||void 0===e?void 0:e.board[o.from.row][o.from.col].piece;n&&U({piece:G(n.type,n.color),from:t,to:c},R(e?e.board:B(),o))}}),500);return()=>clearTimeout(e)}}),[t,m,p]);const B=()=>{const e=[];for(let o=0;o<8;o++){const t=[];for(let e=0;e<8;e++)t.push({piece:I(o,e),color:(o+e)%2===0?"white":"black"});e.push(t)}return e},I=(e,o)=>{if(e<=1){const t="black";if(1===e)return{type:"pawn",color:t};return{type:["rook","knight","bishop","queen","king","bishop","knight","rook"][o],color:t}}if(e>=6){const t="white";if(6===e)return{type:"pawn",color:t};return{type:["rook","knight","bishop","queen","king","bishop","knight","rook"][o],color:t}}return null},G=(e,o)=>({king:{white:"\u2654",black:"\u265a"},queen:{white:"\u2655",black:"\u265b"},rook:{white:"\u2656",black:"\u265c"},bishop:{white:"\u2657",black:"\u265d"},knight:{white:"\u2658",black:"\u265e"},pawn:{white:"\u2659",black:"\u265f"}}[e][o]),V=(e,o)=>"".concat(["a","b","c","d","e","f","g","h"][o]).concat(8-e),R=(e,o)=>{const t=e.map((e=>e.map((e=>Object(i.a)({},e)))));return t[o.to.row][o.to.col].piece=t[o.from.row][o.from.col].piece,t[o.from.row][o.from.col].piece=null,t},U=(e,o)=>{u([...a,e]),n("white"===t?"black":"white");const c=e.checkmate?"checkmate":e.check?"check":"active";if(l(c),e.capture){const o=p[p.length-1];if(o){z(e.from);const c=z(e.to),n=o.board[c.row][c.col].piece;if(n){const e="white"===t?"white":"black";x((o=>Object(i.a)(Object(i.a)({},o),{},{[e]:[...o[e],n]})))}}}h([...p,{board:o,currentPlayer:t,gameStatus:r,move:e}]),d(!0)},z=e=>{const o=e.charAt(0).toLowerCase();return{row:8-parseInt(e.charAt(1)),col:o.charCodeAt(0)-"a".charCodeAt(0)}},H=Object(c.useCallback)((async e=>{if(v(e),L(!0),E())try{await M()}catch(o){console.warn("Could not lock orientation:",o)}n("white"),l("active"),u([]),h([]),d(!1),x({white:[],black:[]})}),[]);Object(c.useCallback)((()=>{H(m)}),[m,H]);return Object(c.useEffect)((()=>{const e=()=>{S(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}}),[]),Object(c.useEffect)((()=>{if(E()&&m){M().catch((e=>{console.warn("Could not lock orientation:",e)}));const e=()=>{E()&&M().catch(console.warn)};return window.addEventListener("orientationchange",e),window.addEventListener("resize",e),()=>{window.removeEventListener("orientationchange",e),window.removeEventListener("resize",e),C().catch(console.warn)}}}),[m]),m?Object(s.jsxs)("div",{className:"chess-game ".concat(P?"fullscreen":""),ref:A,children:[Object(s.jsxs)("div",{className:"game-controls",children:[Object(s.jsxs)("div",{className:"control-buttons",children:[Object(s.jsx)("button",{className:"control-button undo-button",onClick:()=>{if(0!==p.length)if("computer"===m){const e=[...a];e.pop(),e.pop(),u(e);const o=[...p];o.pop(),o.pop(),h(o);const t=o[o.length-1];t?(n(t.currentPlayer),l(t.gameStatus)):(n("white"),l("active")),d(o.length>0)}else{const e=[...a];e.pop(),u(e);const o=[...p],t=o.pop();h(o),t&&(n(t.currentPlayer),l(t.gameStatus)),d(o.length>0)}},disabled:!w,title:"Undo last move",children:"\u21a9 Undo"}),Object(s.jsx)("button",{className:"control-button new-game-button",onClick:()=>H(m),title:"Start a new game",children:"New Game"}),Object(s.jsx)("button",{className:"control-button mode-button",onClick:()=>v(null),title:"Change game mode",children:"Change Mode"}),Object(s.jsx)(N,{isFullscreen:P,toggleFullscreen:()=>{!document.fullscreenElement&&A.current?(A.current.requestFullscreen().catch((e=>{console.error("Error attempting to enable fullscreen:",e)})),S(!0)):document.exitFullscreen&&(document.exitFullscreen().catch((e=>{console.error("Error attempting to exit fullscreen:",e)})),S(!1))}})]}),Object(s.jsxs)("div",{className:"game-status",children:["Status: ",r.charAt(0).toUpperCase()+r.slice(1)]}),Object(s.jsxs)("div",{className:"game-mode",children:["Mode: ","computer"===m?"vs Computer":"vs Player"]})]}),Object(s.jsxs)("div",{className:"game-container",children:[Object(s.jsxs)("div",{className:"game-board",children:[Object(s.jsx)(k,{pieces:O.black,color:"black"}),Object(s.jsx)(b,{currentPlayer:t,gameStatus:r,onMove:U,onNewGame:()=>H(m),boardHistory:p}),Object(s.jsx)(k,{pieces:O.white,color:"white"})]}),Object(s.jsx)("div",{className:"move-history",children:Object(s.jsx)(f,{moves:a})})]})]}):Object(s.jsx)(j,{username:o,onSelectMode:H})};var A=()=>{const[e,o]=Object(c.useState)(""),[t,n]=Object(c.useState)(!1),[r,l]=Object(c.useState)(!0),i=e=>{console.log("Incomplete payment found:",e)};return Object(c.useEffect)((()=>{(async()=>{try{if(window.Pi){const e=await window.Pi.authenticate(["username"],i);o(e.user.username),n(!0)}}catch(e){console.error("Authentication error:",e)}finally{l(!1)}})()}),[]),t?Object(s.jsx)(L,{username:e}):Object(s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#f5f7fa"},children:Object(s.jsxs)("div",{style:{padding:"20px",borderRadius:"10px",backgroundColor:"white",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",textAlign:"center"},children:[Object(s.jsx)("h2",{children:"Connecting to Pi Network..."}),Object(s.jsx)("p",{children:"Please wait while we authenticate your Pi account."})]})})};window.Pi&&(window.Pi.init={sandbox:!0}),l.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(A,{})}),document.getElementById("root"))}],[[21,1,2]]]);