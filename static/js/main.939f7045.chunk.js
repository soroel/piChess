(this["webpackJsonpapp-platform-demo-frontend"]=this["webpackJsonpapp-platform-demo-frontend"]||[]).push([[0],[,,,,,,,,,,function(o,e,c){},function(o,e,c){},function(o,e,c){},,function(o,e,c){},function(o,e,c){},function(o,e,c){},function(o,e,c){},function(o,e,c){},function(o,e,c){"use strict";c.r(e);var t=c(1),r=c.n(t),n=c(4),i=c.n(n),l=(c(9),c(10),c(2)),s=(c(11),c(12),c(0));const a={queen:{white:"\u2655",black:"\u265b"},rook:{white:"\u2656",black:"\u265c"},bishop:{white:"\u2657",black:"\u265d"},knight:{white:"\u2658",black:"\u265e"}},p={queen:"Moves any number of squares diagonally, horizontally, or vertically",rook:"Moves any number of squares horizontally or vertically",bishop:"Moves any number of squares diagonally",knight:"Moves in an L-shape: 2 squares in one direction and 1 square perpendicular"};var u=o=>{let{color:e,position:c,onSelect:r}=o;return Object(t.useEffect)((()=>{const o=o=>{"Escape"===o.key&&r("queen")};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)}),[r]),Object(s.jsx)("div",{className:"promotion-overlay",children:Object(s.jsxs)("div",{className:"promotion-dialog",style:{position:"absolute",left:"".concat(c.x,"px"),top:"".concat(c.y,"px"),transform:"translate(-50%, -50%)",animation:"slideIn 0.3s ease-out"},role:"dialog","aria-modal":"true","aria-label":"Pawn promotion selection",children:[Object(s.jsx)("div",{className:"promotion-header",children:"Choose a piece for promotion"}),Object(s.jsx)("div",{className:"promotion-options",children:["queen","rook","bishop","knight"].map((o=>Object(s.jsxs)("button",{className:"promotion-option",onClick:()=>r(o),title:p[o],"aria-label":"Promote to ".concat(o),children:[Object(s.jsx)("div",{className:"piece-symbol",children:a[o][e]}),Object(s.jsx)("div",{className:"piece-name",children:o.toUpperCase()})]},o)))}),Object(s.jsx)("div",{className:"promotion-footer",children:"Press ESC to cancel (default: Queen)"})]})})};c(14);var h=o=>{let{winner:e,onNewGame:c}=o;return Object(s.jsx)("div",{className:"checkmate-overlay",children:Object(s.jsx)("div",{className:"checkmate-popup",children:Object(s.jsxs)("div",{className:"checkmate-content",children:[Object(s.jsx)("h2",{children:"Checkmate!"}),Object(s.jsxs)("p",{children:[e.charAt(0).toUpperCase()+e.slice(1)," wins!"]}),Object(s.jsx)("button",{className:"new-game-button",onClick:c,children:"New Game"})]})})})};const w={king:{white:"\u2654",black:"\u265a"},queen:{white:"\u2655",black:"\u265b"},rook:{white:"\u2656",black:"\u265c"},bishop:{white:"\u2657",black:"\u265d"},knight:{white:"\u2658",black:"\u265e"},pawn:{white:"\u2659",black:"\u265f"}},b=["a","b","c","d","e","f","g","h"],d=["8","7","6","5","4","3","2","1"];var m=o=>{let{currentPlayer:e,gameStatus:c,onMove:r,onNewGame:n,boardHistory:i}=o;const a=Object(t.useCallback)((()=>{const o=[];for(let e=0;e<8;e++){const c=[];for(let o=0;o<8;o++)c.push({piece:C(e,o),color:(e+o)%2===0?"white":"black"});o.push(c)}return o}),[]),[p,m]=Object(t.useState)(a()),[f,j]=Object(t.useState)(null),[k,v]=Object(t.useState)([]),[g,O]=Object(t.useState)({lastMove:null,canEnPassant:null}),[y,x]=Object(t.useState)(null),[N,M]=Object(t.useState)(null),P=Object(t.useRef)(null);function C(o,e){if(o<=1){const c="black";if(1===o)return{type:"pawn",color:c};return{type:["rook","knight","bishop","queen","king","bishop","knight","rook"][e],color:c}}if(o>=6){const c="white";if(6===o)return{type:"pawn",color:c};return{type:["rook","knight","bishop","queen","king","bishop","knight","rook"][e],color:c}}return null}function S(o,e){return"".concat(b[e]).concat(8-o)}function q(o){const e=o.charAt(0).toLowerCase();return{row:8-parseInt(o.charAt(1)),col:b.indexOf(e)}}function E(o,e,c){var t;if("king"===(null===(t=g.lastMove)||void 0===t?void 0:t.piece.type)&&g.lastMove.piece.color===c)return!1;const r="white"===c?7:0;if(o.row!==r||4!==o.col)return!1;const n=p[o.row][o.col].piece,i=p[e.row][e.col].piece;if(!n||!i||"king"!==n.type||"rook"!==i.type)return!1;const s=e.col<o.col?-1:1;for(let l=o.col+s;l!==e.col;l+=s)if(p[r][l].piece)return!1;for(let a=o.col;a!==o.col+3*s;a+=s){const e=p.map((o=>o.map((o=>Object(l.a)({},o)))));if(e[r][a].piece=n,e[r][o.col].piece=null,G(c,e))return!1}return!0}function A(o,e,c){const t=[];switch(e.type){case"pawn":const r="white"===e.color?-1:1,n="white"===e.color?6:1;let i=o.row+r;if(i>=0&&i<8&&!c[i][o.col].piece&&(t.push({row:i,col:o.col}),o.row===n)){const e=o.row+2*r;c[e][o.col].piece||t.push({row:e,col:o.col})}[-1,1].forEach((r=>{const n=o.col+r;if(n>=0&&n<8&&i>=0&&i<8){const o=c[i][n].piece;o&&o.color!==e.color&&t.push({row:i,col:n})}}));break;case"knight":[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]].forEach((r=>{let[n,i]=r;const l=o.row+n,s=o.col+i;if(l>=0&&l<8&&s>=0&&s<8){const o=c[l][s].piece;o&&o.color===e.color||t.push({row:l,col:s})}}));break;case"bishop":[[-1,-1],[-1,1],[1,-1],[1,1]].forEach((r=>{let[n,i]=r,l=o.row+n,s=o.col+i;for(;l>=0&&l<8&&s>=0&&s<8;){const o=c[l][s].piece;if(o){o.color!==e.color&&t.push({row:l,col:s});break}t.push({row:l,col:s}),l+=n,s+=i}}));break;case"rook":[[-1,0],[1,0],[0,-1],[0,1]].forEach((r=>{let[n,i]=r,l=o.row+n,s=o.col+i;for(;l>=0&&l<8&&s>=0&&s<8;){const o=c[l][s].piece;if(o){o.color!==e.color&&t.push({row:l,col:s});break}t.push({row:l,col:s}),l+=n,s+=i}}));break;case"queen":[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].forEach((r=>{let[n,i]=r,l=o.row+n,s=o.col+i;for(;l>=0&&l<8&&s>=0&&s<8;){const o=c[l][s].piece;if(o){o.color!==e.color&&t.push({row:l,col:s});break}t.push({row:l,col:s}),l+=n,s+=i}}));break;case"king":[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].forEach((r=>{let[n,i]=r;const l=o.row+n,s=o.col+i;if(l>=0&&l<8&&s>=0&&s<8){const o=c[l][s].piece;o&&o.color===e.color||t.push({row:l,col:s})}}))}return t}function I(o,e){for(let c=0;c<8;c++)for(let t=0;t<8;t++){const r=e[c][t].piece;if("king"===(null===r||void 0===r?void 0:r.type)&&r.color===o)return{row:c,col:t}}return null}function B(o,e,c){const t="white"===e?1:-1,r=[{row:o.row+t,col:o.col-1},{row:o.row+t,col:o.col+1}];for(const a of r)if(a.row>=0&&a.row<8&&a.col>=0&&a.col<8){const o=c[a.row][a.col].piece;if("pawn"===(null===o||void 0===o?void 0:o.type)&&o.color===e)return!0}const n=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[a,p]of n){const t=o.row+a,r=o.col+p;if(t>=0&&t<8&&r>=0&&r<8){const o=c[t][r].piece;if("knight"===(null===o||void 0===o?void 0:o.type)&&o.color===e)return!0}}const i=[[-1,-1],[-1,1],[1,-1],[1,1]];for(const[a,p]of i){let t=o.row+a,r=o.col+p;for(;t>=0&&t<8&&r>=0&&r<8;){const o=c[t][r].piece;if(o){if(o.color===e&&("bishop"===o.type||"queen"===o.type))return!0;break}t+=a,r+=p}}const l=[[-1,0],[1,0],[0,-1],[0,1]];for(const[a,p]of l){let t=o.row+a,r=o.col+p;for(;t>=0&&t<8&&r>=0&&r<8;){const o=c[t][r].piece;if(o){if(o.color===e&&("rook"===o.type||"queen"===o.type))return!0;break}t+=a,r+=p}}const s=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(const[a,p]of s){const t=o.row+a,r=o.col+p;if(t>=0&&t<8&&r>=0&&r<8){const o=c[t][r].piece;if("king"===(null===o||void 0===o?void 0:o.type)&&o.color===e)return!0}}return!1}function G(o,e){const c=I(o,e);if(!c)return!1;return B(c,"white"===o?"black":"white",e)}function U(o,e){const c=function(o,e){const c=I(o,e);if(!c)return[];const t=[],r="white"===o?"black":"white",n="white"===r?1:-1,i=[{row:c.row+n,col:c.col-1},{row:c.row+n,col:c.col+1}];for(const a of i)if(a.row>=0&&a.row<8&&a.col>=0&&a.col<8){const o=e[a.row][a.col].piece;"pawn"===(null===o||void 0===o?void 0:o.type)&&o.color===r&&t.push({row:a.row,col:a.col})}const l=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[a,p]of l){const o=c.row+a,n=c.col+p;if(o>=0&&o<8&&n>=0&&n<8){const c=e[o][n].piece;"knight"===(null===c||void 0===c?void 0:c.type)&&c.color===r&&t.push({row:o,col:n})}}const s=[[-1,-1],[-1,1],[1,-1],[1,1],[-1,0],[1,0],[0,-1],[0,1]];for(const[a,p]of s){let o=c.row+a,n=c.col+p;for(;o>=0&&o<8&&n>=0&&n<8;){const c=e[o][n].piece;if(c){if(c.color===r){const e=Math.abs(a)===Math.abs(p);(!e||"bishop"!==c.type&&"queen"!==c.type)&&(e||"rook"!==c.type&&"queen"!==c.type)||t.push({row:o,col:n})}break}o+=a,n+=p}}return t}(o,e);if(0===c.length)return!0;if(c.length>1)return R(o,e);const t=I(o,e),r=c[0],n=e[r.row][r.col].piece.type;if("knight"===n||"pawn"===n)return L(o,r,e)||R(o,e);return function(o,e){const c=[],t=Math.sign(e.row-o.row),r=Math.sign(e.col-o.col);let n=o.row+t,i=o.col+r;for(;n!==e.row||i!==e.col;)c.push({row:n,col:i}),n+=t,i+=r;return c}(t,r).some((c=>V(c,o,e)))||L(o,r,e)||R(o,e)}function V(o,e,c){for(let t=0;t<8;t++)for(let r=0;r<8;r++){const n=c[t][r].piece;if(n&&n.color===e){if(A({row:t,col:r},n,c).some((e=>e.row===o.row&&e.col===o.col))){const n=c.map((o=>o.map((o=>Object(l.a)({},o)))));if(n[o.row][o.col].piece=n[t][r].piece,n[t][r].piece=null,!G(e,n))return!0}}}return!1}function L(o,e,c){return V(e,o,c)}function R(o,e){const c=I(o,e),t=e[c.row][c.col].piece;return A(c,t,e).some((r=>{const n=e.map((o=>o.map((o=>Object(l.a)({},o)))));return n[r.row][r.col].piece=t,n[c.row][c.col].piece=null,!B(r,"white"===o?"black":"white",n)}))}function H(o,e){return!!G(o,e)&&!U(o,e)}function z(o,t){if("checkmate"!==c&&!y)if(f){if(k.some((e=>e.row===o&&e.col===t))){const c=p.map((o=>o.map((o=>Object(l.a)({},o))))),n=c[f.row][f.col].piece,i=c[o][t].piece,s=!!i||"pawn"===n.type&&t!==f.col;if("king"===n.type&&2===Math.abs(t-f.col)){const e=t>f.col?7:0,r=t>f.col?t-1:t+1;c[o][r].piece=c[o][e].piece,c[o][e].piece=null}if("pawn"===n.type&&t!==f.col&&!i){c[f.row][t].piece=null}c[o][t].piece=n,c[f.row][f.col].piece=null,M({from:{row:f.row,col:f.col},to:{row:o,col:t}});const a={lastMove:{piece:n,from:Object(l.a)({},f),to:{row:o,col:t}},canEnPassant:null};if("pawn"===n.type&&2===Math.abs(o-f.row)&&(a.canEnPassant={row:o,col:t}),m(c),O(a),"pawn"===n.type){if("white"===n.color&&0===o||"black"===n.color&&7===o){if(function(o){const e=p[o.row][o.col].piece;if(!e||"pawn"!==e.type)return!1;if(("white"===e.color&&0===o.row||"black"===e.color&&7===o.row)&&P.current){const e=P.current.querySelector('[data-position="'.concat(o.row,"-").concat(o.col,'"]'));if(e){const c=e.getBoundingClientRect(),t=P.current.getBoundingClientRect(),r=c.left-t.left+c.width/2,n=c.top-t.top+c.height/2;return x({position:o,dialogPosition:{x:r,y:n}}),!0}}return!1}({row:o,col:t}))return}}const u="white"===e?"black":"white",h=G(u,c),b=h&&H(u,c),d={piece:w[n.type][n.color],from:S(f.row,f.col),to:S(o,t),capture:s,check:h,checkmate:b};r(d,c)}j(null),v([])}else{const c=p[o][t].piece;c&&c.color===e&&(j({row:o,col:t}),v(function(o,c){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=c[o.row][o.col].piece;if(!r||r.color!==e&&!t)return[];let n=A(o,r,c);if(!t&&("king"!==r.type||G(r.color,c)||(E(o,{row:o.row,col:7},r.color)&&n.push({row:o.row,col:o.col+2}),E(o,{row:o.row,col:0},r.color)&&n.push({row:o.row,col:o.col-2})),"pawn"===r.type&&g.canEnPassant)){const e="white"===r.color?3:4;o.row===e&&[-1,1].forEach((e=>{var c;o.col+e===(null===(c=g.canEnPassant)||void 0===c?void 0:c.col)&&n.push({row:o.row+("white"===r.color?-1:1),col:o.col+e})}))}t||(n=n.filter((e=>{const t=c.map((o=>o.map((o=>Object(l.a)({},o)))));return t[e.row][e.col].piece=t[o.row][o.col].piece,t[o.row][o.col].piece=null,!G(r.color,t)})));return n}({row:o,col:t},p)))}}return Object(t.useEffect)((()=>{if(i.length>0){const o=i[i.length-1];if(m(o.board),o.move){const e=q(o.move.from),c=q(o.move.to);M({from:e,to:c})}}else m(a()),M(null)}),[i,a]),Object(s.jsxs)("div",{className:"chess-board",ref:P,children:[p.map(((o,t)=>Object(s.jsx)("div",{className:"board-row",children:o.map(((o,r)=>{var n;const i=(null===N||void 0===N?void 0:N.from.row)===t&&(null===N||void 0===N?void 0:N.from.col)===r,l=(null===N||void 0===N?void 0:N.to.row)===t&&(null===N||void 0===N?void 0:N.to.col)===r,a="king"===(null===(n=o.piece)||void 0===n?void 0:n.type)&&o.piece.color===e&&"check"===c;return Object(s.jsx)("div",{className:"square ".concat(o.color," ").concat((null===f||void 0===f?void 0:f.row)===t&&(null===f||void 0===f?void 0:f.col)===r?"selected":""," ").concat(k.some((o=>o.row===t&&o.col===r))?"valid-move":""," ").concat(i||l?"last-move":""," ").concat(a?"check":""),"data-position":"".concat(t,"-").concat(r),"data-file":7===t?b[r]:"","data-rank":0===r?d[t]:"",onClick:()=>z(t,r),children:o.piece&&Object(s.jsx)("div",{className:"piece ".concat(l?"piece-moving":""),children:w[o.piece.type][o.piece.color]})},"".concat(t,"-").concat(r))}))},t))),y&&Object(s.jsx)(u,{color:p[y.position.row][y.position.col].piece.color,position:y.dialogPosition,onSelect:function(o){if(!y||!g.lastMove)return;const e=p.map((o=>o.map((o=>Object(l.a)({},o))))),c=e[y.position.row][y.position.col].piece;e[y.position.row][y.position.col].piece={type:o,color:c.color};const t="white"===c.color?"black":"white",n=G(t,e),i=n&&H(t,e),s={piece:w[o][c.color],from:S(g.lastMove.from.row,g.lastMove.from.col),to:S(y.position.row,y.position.col),capture:"pawn"===g.lastMove.piece.type&&g.lastMove.from.col!==y.position.col,check:n,checkmate:i};x(null),r(s,e)}}),"checkmate"===c&&Object(s.jsx)(h,{winner:"white"===e?"black":"white",onNewGame:n})]})};c(15);var f=o=>{let{moves:e}=o;const c=o=>{let e=o.piece;return o.capture&&(e+="x"),e+=o.to,o.checkmate?e+="#":o.check&&(e+="+"),e};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h3",{className:"history-title",children:"Move History"}),Object(s.jsx)("div",{className:"moves-container",children:0===e.length?Object(s.jsx)("div",{className:"no-moves",children:"No moves yet"}):Object(s.jsx)("div",{className:"moves-list",children:e.map(((o,e)=>Object(s.jsxs)("div",{className:"move-entry",children:[Object(s.jsxs)("span",{className:"move-number",children:[Math.floor(e/2)+1,"."]}),Object(s.jsx)("span",{className:"move-text ".concat(e%2===0?"white":"black"),children:c(o)})]},e)))})})]})};c(16);var j=o=>{let{onSelectMode:e,username:c}=o;return Object(s.jsxs)("div",{className:"game-mode-selector",children:[Object(s.jsxs)("h2",{children:["Welcome, ",c,"!"]}),Object(s.jsx)("p",{children:"Choose your game mode:"}),Object(s.jsxs)("div",{className:"mode-buttons",children:[Object(s.jsxs)("button",{className:"mode-button computer",onClick:()=>e("computer"),children:[Object(s.jsx)("span",{className:"icon",children:"\ud83e\udd16"}),Object(s.jsx)("span",{className:"label",children:"Play vs Computer"})]}),Object(s.jsxs)("button",{className:"mode-button player",onClick:()=>e("player"),children:[Object(s.jsx)("span",{className:"icon",children:"\ud83d\udc65"}),Object(s.jsx)("span",{className:"label",children:"Play vs Player"})]})]})]})};c(17);var k=o=>{let{pieces:e,color:c}=o;const t=o=>({king:{white:"\u2654",black:"\u265a"},queen:{white:"\u2655",black:"\u265b"},rook:{white:"\u2656",black:"\u265c"},bishop:{white:"\u2657",black:"\u265d"},knight:{white:"\u2658",black:"\u265e"},pawn:{white:"\u2659",black:"\u265f"}}[o.type][o.color]),r={queen:9,rook:5,bishop:3,knight:3,pawn:1,king:0},n=[...e].sort(((o,e)=>r[e.type]-r[o.type]));return Object(s.jsxs)("div",{className:"captured-pieces ".concat(c),children:[Object(s.jsxs)("div",{className:"captured-pieces-label",children:["white"===c?"White":"Black"," captures:"]}),Object(s.jsx)("div",{className:"captured-pieces-list",children:n.map(((o,e)=>Object(s.jsx)("span",{className:"captured-piece",children:t(o)},e)))})]})};const v={pawn:1,knight:3,bishop:3,rook:5,queen:9,king:100},g={pawn:[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],knight:[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],bishop:[[-2,-1,-1,-1,-1,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,1,1,.5,0,-1],[-1,.5,.5,1,1,.5,.5,-1],[-1,0,1,1,1,1,0,-1],[-1,1,1,1,1,1,1,-1],[-1,.5,0,0,0,0,.5,-1],[-2,-1,-1,-1,-1,-1,-1,-2]],rook:[[0,0,0,0,0,0,0,0],[.5,1,1,1,1,1,1,.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[0,0,0,.5,.5,0,0,0]],queen:[[-2,-1,-1,-.5,-.5,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,.5,.5,.5,0,-1],[-.5,0,.5,.5,.5,.5,0,-.5],[0,0,.5,.5,.5,.5,0,-.5],[-1,.5,.5,.5,.5,.5,0,-1],[-1,0,.5,0,0,0,0,-1],[-2,-1,-1,-.5,-.5,-1,-1,-2]],king:[[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-2,-3,-3,-4,-4,-3,-3,-2],[-1,-2,-2,-2,-2,-2,-2,-1],[2,2,0,0,0,0,2,2],[2,3,1,0,0,1,3,2]]};class O{getValidMoves(o,e,c){const t=[],r={pawn:"white"===e.color?[[-1,0]]:[[1,0]],knight:[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]],bishop:[[-1,-1],[-1,1],[1,-1],[1,1]],rook:[[-1,0],[1,0],[0,-1],[0,1]],queen:[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],king:[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]]},n=["bishop","rook","queen"].includes(e.type);if("pawn"===e.type){const r="white"===e.color?-1:1,n="white"===e.color?6:1;return this.isValidPosition(o.row+r,o.col)&&!c[o.row+r][o.col].piece&&(t.push({row:o.row+r,col:o.col}),o.row!==n||c[o.row+2*r][o.col].piece||t.push({row:o.row+2*r,col:o.col})),[-1,1].forEach((n=>{const i=o.row+r,l=o.col+n;if(this.isValidPosition(i,l)){const o=c[i][l].piece;o&&o.color!==e.color&&t.push({row:i,col:l})}})),t}return r[e.type].forEach((r=>{let[i,l]=r,s=o.row+i,a=o.col+l;for(;this.isValidPosition(s,a);){const o=c[s][a];if(o.piece){o.piece.color!==e.color&&t.push({row:s,col:a});break}if(t.push({row:s,col:a}),!n)break;s+=i,a+=l}})),t}isValidPosition(o,e){return o>=0&&o<8&&e>=0&&e<8}evaluatePosition(o){let e=0;for(let c=0;c<8;c++)for(let t=0;t<8;t++){const r=o[c][t].piece;if(r){const o=v[r.type]+g[r.type]["white"===r.color?c:7-c][t];e+="black"===r.color?o:-o}}return e}minimax(o,e,c,t,r){if(0===e)return{score:this.evaluatePosition(o)};const n=[];for(let i=0;i<8;i++)for(let e=0;e<8;e++){const c=o[i][e].piece;if(c&&c.color===(r?"black":"white")){this.getValidMoves({row:i,col:e},c,o).forEach((o=>{n.push({from:{row:i,col:e},to:o})}))}}if(r){let r,i=-1/0;for(const l of n){const n=this.makeMove(o,l),s=this.minimax(n,e-1,c,t,!1);if(s.score>i&&(i=s.score,r=l),t<=(c=Math.max(c,s.score)))break}return{score:i,move:r}}{let r,i=1/0;for(const l of n){const n=this.makeMove(o,l),s=this.minimax(n,e-1,c,t,!0);if(s.score<i&&(i=s.score,r=l),(t=Math.min(t,s.score))<=c)break}return{score:i,move:r}}}makeMove(o,e){const c=o.map((o=>o.map((o=>Object(l.a)({},o)))));return c[e.to.row][e.to.col].piece=c[e.from.row][e.from.col].piece,c[e.from.row][e.from.col].piece=null,c}getBestMove(o){return this.minimax(o,3,-1/0,1/0,!0).move||null}}c(18);var y=o=>{let{username:e}=o;const[c,r]=Object(t.useState)("white"),[n,i]=Object(t.useState)("active"),[a,p]=Object(t.useState)([]),[u,h]=Object(t.useState)([]),[w,b]=Object(t.useState)(!1),[d,v]=Object(t.useState)(null),[g]=Object(t.useState)((()=>new O)),[y,x]=Object(t.useState)({white:[],black:[]}),N=(o,e)=>{if(o<=1){const c="black";if(1===o)return{type:"pawn",color:c};return{type:["rook","knight","bishop","queen","king","bishop","knight","rook"][e],color:c}}if(o>=6){const c="white";if(6===o)return{type:"pawn",color:c};return{type:["rook","knight","bishop","queen","king","bishop","knight","rook"][e],color:c}}return null},M=(o,e)=>"".concat(["a","b","c","d","e","f","g","h"][e]).concat(8-o),P=Object(t.useCallback)(((o,e)=>{p((e=>[...e,o])),r((o=>"white"===o?"black":"white"));const t=o.checkmate?"checkmate":o.check?"check":"active";if(i(t),o.capture){const e=u[u.length-1];if(e){const t=C(o.to),r=e.board[t.row][t.col].piece;if(r){const o="white"===c?"white":"black";x((e=>Object(l.a)(Object(l.a)({},e),{},{[o]:[...e[o],r]})))}}}h((r=>[...r,{board:e,currentPlayer:c,gameStatus:t,move:o}])),b(!0)}),[u,c]);Object(t.useEffect)((()=>{if("computer"===d&&"black"===c){const o=setTimeout((()=>{const o=u[u.length-1];if(o){const c=g.getBestMove(o.board);if(c){var e;const t=M(c.from.row,c.from.col),r=M(c.to.row,c.to.col);P({piece:(null===(e=o.board[c.from.row][c.from.col].piece)||void 0===e?void 0:e.type)||"",from:t,to:r},((o,e)=>{const c=o.map((o=>o.map((o=>Object(l.a)({},o)))));return c[e.to.row][e.to.col].piece=c[e.from.row][e.from.col].piece,c[e.from.row][e.from.col].piece=null,c})(o?o.board:(()=>{const o=[];for(let e=0;e<8;e++){const c=[];for(let o=0;o<8;o++)c.push({piece:N(e,o),color:(e+o)%2===0?"white":"black"});o.push(c)}return o})(),c))}}}),500);return()=>clearTimeout(o)}}),[c,d,u,g,P]);const C=o=>{const e=o.charAt(0).toLowerCase();return{row:8-parseInt(o.charAt(1)),col:e.charCodeAt(0)-"a".charCodeAt(0)}},S=()=>{r("white"),i("active"),p([]),h([]),b(!1),x({white:[],black:[]})};return d?Object(s.jsxs)("div",{className:"chess-game",children:[Object(s.jsxs)("div",{className:"game-info",children:[Object(s.jsxs)("div",{className:"current-player",children:["Current Player: ",c.charAt(0).toUpperCase()+c.slice(1)]}),Object(s.jsxs)("div",{className:"game-controls",children:[Object(s.jsx)("button",{className:"control-button undo-button",onClick:()=>{if(0!==u.length)if("computer"===d){const o=[...a];o.pop(),o.pop(),p(o);const e=[...u];e.pop(),e.pop(),h(e);const c=e[e.length-1];c?(r(c.currentPlayer),i(c.gameStatus)):(r("white"),i("active")),b(e.length>0)}else{const o=[...a];o.pop(),p(o);const e=[...u],c=e.pop();h(e),c&&(r(c.currentPlayer),i(c.gameStatus)),b(e.length>0)}},disabled:!w,title:"Undo last move",children:"\u21a9 Undo"}),Object(s.jsx)("button",{className:"control-button new-game-button",onClick:S,title:"Start a new game",children:"New Game"}),Object(s.jsx)("button",{className:"control-button mode-button",onClick:()=>v(null),title:"Change game mode",children:"Change Mode"})]}),Object(s.jsxs)("div",{className:"game-status",children:["Status: ",n.charAt(0).toUpperCase()+n.slice(1)]}),Object(s.jsxs)("div",{className:"game-mode",children:["Mode: ","computer"===d?"vs Computer":"vs Player"]})]}),Object(s.jsxs)("div",{className:"game-container",children:[Object(s.jsxs)("div",{className:"game-board",children:[Object(s.jsx)(k,{pieces:y.black,color:"black"}),Object(s.jsx)(m,{currentPlayer:c,gameStatus:n,onMove:P,onNewGame:S,boardHistory:u}),Object(s.jsx)(k,{pieces:y.white,color:"white"})]}),Object(s.jsx)("div",{className:"move-history",children:Object(s.jsx)(f,{moves:a})})]})]}):Object(s.jsx)(j,{username:e,onSelectMode:v})};var x=()=>{const[o,e]=Object(t.useState)(""),[c,r]=Object(t.useState)(!1),n=o=>{console.log("Incomplete payment found:",o)};return Object(t.useEffect)((()=>{window.Pi&&(window.Pi.init={sandbox:!0}),(async()=>{try{if(window.Pi){const o=await window.Pi.authenticate(["username"],{onIncompletePaymentFound:n});e(o.user.username),r(!0)}}catch(o){console.error("Authentication error:",o)}})()}),[]),c?Object(s.jsx)(y,{username:o}):Object(s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#f5f7fa"},children:Object(s.jsxs)("div",{style:{padding:"20px",borderRadius:"10px",backgroundColor:"white",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",textAlign:"center"},children:[Object(s.jsx)("h2",{children:"Connecting to Pi Network..."}),Object(s.jsx)("p",{children:"Please wait while we authenticate your Pi account."})]})})};window.Pi&&(window.Pi.init={sandbox:!0}),i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(x,{})}),document.getElementById("root"))}],[[19,1,2]]]);
//# sourceMappingURL=main.939f7045.chunk.js.map